"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[3740],{6300:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>n,toc:()=>u});const n=JSON.parse('{"id":"walrus-sites/tutorial-publish","title":"Publishing a Walrus Site","description":"Tutorial for publishing your first Walrus Site using the site-builder tool with example projects.","source":"@site/../content/walrus-sites/tutorial-publish.mdx","sourceDirName":"walrus-sites","slug":"/walrus-sites/tutorial-publish","permalink":"/docs/walrus-sites/tutorial-publish","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/walrus-sites/tutorial-publish.mdx","tags":[],"version":"current","frontMatter":{"title":"Publishing a Walrus Site","description":"Tutorial for publishing your first Walrus Site using the site-builder tool with example projects.","keywords":["walrus sites","publishing","deployment","site builder","tutorial","walrus snake","examples"]},"sidebar":"sitesSidebar","previous":{"title":"Installing the Site Builder","permalink":"/docs/walrus-sites/tutorial-install"},"next":{"title":"Set a SuiNS Name","permalink":"/docs/walrus-sites/tutorial-suins"}}');var i=s(2714),o=s(8885);const a={title:"Publishing a Walrus Site",description:"Tutorial for publishing your first Walrus Site using the site-builder tool with example projects.",keywords:["walrus sites","publishing","deployment","site builder","tutorial","walrus snake","examples"]},l=void 0,r={},u=[{value:"Select the Source Material for the Site",id:"select-the-source-material-for-the-site",level:2},{value:"Deploying the Site",id:"deploying-the-site",level:2},{value:"Update the Site",id:"update-the-site",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Term:s}=t;return s||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Now that everything is installed and configured, you should be able to start publishing your first\nWalrus Site!"}),"\n",(0,i.jsx)(t.h2,{id:"select-the-source-material-for-the-site",children:"Select the Source Material for the Site"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"site-builder"})," works by uploading a directory of files produced by any web framework to Walrus\nand adding the relevant metadata to Sui. This directory should have a file called ",(0,i.jsx)(t.code,{children:"index.html"})," in\nits root, which will be the entry point to the Walrus Site."]}),"\n",(0,i.jsxs)(t.p,{children:["There is a very useful ",(0,i.jsx)(t.a,{href:"https://github.com/MystenLabs/example-walrus-sites",children:"example-Walrus-sites"}),"\nrepository that contains multiple kinds of sites that you can use for reference."]}),"\n",(0,i.jsxs)(t.p,{children:["For simplicity, we will start by publishing the most frugal of the sites, the ",(0,i.jsx)(t.code,{children:"walrus-snake"})," game."]}),"\n",(0,i.jsx)(t.p,{children:"First, clone the repository of the examples:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:"$ git clone https://github.com/MystenLabs/example-walrus-sites.git && cd example-walrus-sites\n"})}),"\n",(0,i.jsx)(t.h2,{id:"deploying-the-site",children:"Deploying the Site"}),"\n",(0,i.jsxs)(t.p,{children:["Since we have placed the ",(0,i.jsx)(t.code,{children:"walrus"})," and ",(0,i.jsx)(t.code,{children:"site-builder"})," binaries and configuration in their default\nlocations, deploying the ",(0,i.jsx)(t.code,{children:"./walrus-snake"})," site is as simple as calling again the deploy command:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:"$ site-builder --context=testnet deploy ./walrus-snake --epochs 1\n"})}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsx)(t.p,{children:"Depending on the network, the duration of an epoch may vary. Currently on Walrus Testnet, the\nduration of an epoch is one day. On Mainnet, the duration of an epoch is two weeks."})}),"\n",(0,i.jsxs)(t.admonition,{title:"Testnet vs Mainnet Access",type:"warning",children:[(0,i.jsx)(t.p,{children:"After deploying, how you access your site depends on which network you used:"}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Mainnet sites"}),": Can be accessed through any mainnet portal.\n",(0,i.jsx)(t.a,{href:"https://wal.app",children:"https://wal.app"})," serves Walrus Sites on mainnet by resolving SuiNS names that point to them."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Testnet sites"}),": Can be accessed through any testnet portal.\nWalrus Foundation does not operate a testnet portal. You can ",(0,i.jsx)(t.a,{href:"/docs/walrus-sites/portal",children:"self-host or run one locally"}),"."]}),"\n"]}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"\nThe end of the output should look like the following:\n\n```sh\nExecution completed\nResource operations performed:\n  - created resource /Oi-Regular.ttf with quilt patch ID Jqz2KSMu18pygjkC-WVEQqtUZRo18-cuf_566VZSxVoBHgAjAg\n  - created resource /file.svg with quilt patch ID Jqz2KSMu18pygjkC-WVEQqtUZRo18-cuf_566VZSxVoBAQAMAA\n  - created resource /index.html with quilt patch ID Jqz2KSMu18pygjkC-WVEQqtUZRo18-cuf_566VZSxVoBDAAZAA\n  - created resource /walrus.svg with quilt patch ID Jqz2KSMu18pygjkC-WVEQqtUZRo18-cuf_566VZSxVoBGQAeAA\nThe site routes were modified.\nMetadata updated.\nThe site name has been updated.\n\nCreated new site!\nNew site object ID: 0x617221edd060dafb4070b73160ebf535e1516bf7f246890ed35190eba786d7ac\n\u26a0 wal.app only supports sites deployed on mainnet.\n    To browse your testnet site, you need to self-host a portal:\n    1. For local development: http://2ffmxm7jmglccr79htmpdbaeqezp2krgftue5pfq9f83tdqjsc.localhost:3000\n    2. For public sharing: http://2ffmxm7jmglccr79htmpdbaeqezp2krgftue5pfq9f83tdqjsc.yourdomain.com:3000\n\n    \ud83d\udcd6 Setup instructions: https://docs.wal.app/walrus-sites/portal.html#running-the-portal-locally\n\n    \ud83d\udca1 Tip: You may also bring your own domain (https://docs.wal.app/walrus-sites/bring-your-own-domain.html)\n            or find third-party hosted testnet portals.\n"})}),(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsxs)(t.p,{children:["Keep in mind that option 2 is only available on ",(0,i.jsx)(t.code,{children:"mainnet"}),".\nFor testnet sites, use option 1 - see the ",(0,i.jsx)(t.a,{href:"/docs/walrus-sites/portal",children:"portal setup guide"})," for instructions."]})})]}),"\n",(0,i.jsxs)(t.p,{children:["This output tells you that, for each file in the folder, a new Walrus quilt was created, and the\nrespective quilt ID. Further, it prints the object ID of the Walrus Site object on Sui (so you can\nhave a look in the explorer and use it to set the SuiNS name) and, finally, the URL at which you can\nbrowse the site.\nThe deploy command will also save this new Site Object ID to the ",(0,i.jsx)(t.code,{children:"ws-resources.json"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["Note here that we are implicitly using the default ",(0,i.jsx)(t.code,{children:"sites-config.yaml"})," as the config for the site\nbuilder that we set up previously on the ",(0,i.jsx)(t.a,{href:"/docs/walrus-sites/tutorial-install",children:"installation section"}),". The\nconfiguration file is necessary to ensure that the ",(0,i.jsx)(t.code,{children:"site-builder"})," knows the correct Sui package for\nthe Walrus Sites logic."]}),"\n",(0,i.jsxs)(t.p,{children:["More details on the configuration of the ",(0,i.jsx)(t.code,{children:"site-builder"})," can be found under the ",(0,i.jsx)(t.a,{href:"/docs/walrus-sites/builder-config",children:"advanced\nconfiguration"})," section."]}),"\n",(0,i.jsx)(t.h2,{id:"update-the-site",children:"Update the Site"}),"\n",(0,i.jsxs)(t.p,{children:["Let's say now you want to update the content of the site, for example by changing the title from\n\"eat all the ",(0,i.jsx)(s,{lookup:"Blob",children:"blobs"}),'!" to "Glob all the ',"Blobs",'!".']}),"\n",(0,i.jsxs)(t.p,{children:["First, make this edit on in the ",(0,i.jsx)(t.code,{children:"./walrus-snake/index.html"})," file."]}),"\n",(0,i.jsxs)(t.p,{children:["Then, you can update the existing site by running the ",(0,i.jsx)(t.code,{children:"deploy"})," command again. The ",(0,i.jsx)(t.code,{children:"deploy"})," command\nwill use the Site Object ID stored in ws-resources.json (from the initial deployment) to identify\nwhich site to update. You do not need to specify the object ID manually:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:"site-builder --context=testnet deploy --epochs 1 ./walrus-snake\n"})}),"\n",(0,i.jsx)(t.p,{children:"The output this time should be:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:"Execution completed\nResource operations performed:\n  - deleted resource /Oi-Regular.ttf with quilt patch ID Jqz2KSMu18pygjkC-WVEQqtUZRo18-cuf_566VZSxVoBHgAjAg\n  - deleted resource /file.svg with quilt patch ID Jqz2KSMu18pygjkC-WVEQqtUZRo18-cuf_566VZSxVoBAQAMAA\n  - deleted resource /index.html with quilt patch ID Jqz2KSMu18pygjkC-WVEQqtUZRo18-cuf_566VZSxVoBDAAZAA\n  - deleted resource /walrus.svg with quilt patch ID Jqz2KSMu18pygjkC-WVEQqtUZRo18-cuf_566VZSxVoBGQAeAA\n  - created resource /Oi-Regular.ttf with quilt patch ID BjJAfHLJKMDZ0tFZaLKVw0R74re5RG65-xNhaZ5uwowBHgAjAg\n  - created resource /file.svg with quilt patch ID BjJAfHLJKMDZ0tFZaLKVw0R74re5RG65-xNhaZ5uwowBAQAMAA\n  - created resource /index.html with quilt patch ID BjJAfHLJKMDZ0tFZaLKVw0R74re5RG65-xNhaZ5uwowBDAAZAA\n  - created resource /walrus.svg with quilt patch ID BjJAfHLJKMDZ0tFZaLKVw0R74re5RG65-xNhaZ5uwowBGQAeAA\nThe site routes were left unchanged.\nNo Metadata updated.\nSite name has not been updated.\n\nSite object ID: 0x4a1be0fb330215c532d74c70d34bc35f185cc7ce025e04b9ad42bc4ac8eda5ce\n\u26a0 wal.app only supports sites deployed on mainnet.\n    To browse your testnet site, you need to self-host a portal:\n    1. For local development: http://1uhtkoi4t8swxbn2y0mec0l94368nhq2wa1xlh1kc1e43fbzym.localhost:3000\n    2. For public sharing: http://1uhtkoi4t8swxbn2y0mec0l94368nhq2wa1xlh1kc1e43fbzym.yourdomain.com:3000\n\n    \ud83d\udcd6 Setup instructions: https://docs.wal.app/walrus-sites/portal.html#running-the-portal-locally\n\n    \ud83d\udca1 Tip: You may also bring your own domain (https://docs.wal.app/walrus-sites/bring-your-own-domain.html)\n            or find third-party hosted testnet portals.\n"})}),"\n",(0,i.jsx)(t.p,{children:"Browsing to the provided URL should reflect the change. You've updated the site!"}),"\n",(0,i.jsxs)(t.p,{children:["Notice that all site resources are deleted (because they all belong to the same quilt), even those\nthat haven't been modified. They then get re-uploaded together as a single quilt, where each\nresource corresponds to a quilt patch. This happens because the site-builder stores files on Walrus\nusing quilts. This approach offers significant benefits: faster upload speeds and lower\nstorage costs, especially when uploading many small files. The only disadvantage is that you cannot\nupdate a single file within a quilt - if even a tiny file changes, the entire quilt must be\nre-uploaded. Upcoming versions of the site-builder will introduce optimizations in the storage\nusage between updates. For a detailed overview of Quilts, visit this\n",(0,i.jsx)(t.a,{href:"https://docs.wal.app/usage/quilt.html",children:"section"})," of the documentation."]}),"\n",(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsx)(t.p,{children:"The wallet you are using must be the owner of the Walrus Site object to be able to update it."})})]})}function c(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8885:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>l});var n=s(9378);const i={},o=n.createContext(i);function a(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);