"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[717],{4843:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"walrus-sites/ci-cd-gh-secrets-vars","title":"Preparing Your Deployment Credentials","description":"Guide to setting up GitHub secrets and variables for secure Walrus Sites deployment with Sui wallet credentials.","source":"@site/../content/walrus-sites/ci-cd-gh-secrets-vars.mdx","sourceDirName":"walrus-sites","slug":"/walrus-sites/ci-cd-gh-secrets-vars","permalink":"/docs/walrus-sites/ci-cd-gh-secrets-vars","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/walrus-sites/ci-cd-gh-secrets-vars.mdx","tags":[],"version":"current","frontMatter":{"title":"Preparing Your Deployment Credentials","description":"Guide to setting up GitHub secrets and variables for secure Walrus Sites deployment with Sui wallet credentials.","keywords":["walrus sites","github secrets","deployment credentials","sui wallet","private key","security","authentication"]},"sidebar":"sitesSidebar","previous":{"title":"CI/CD","permalink":"/docs/walrus-sites/ci-cd"},"next":{"title":"Writing Your Workflow","permalink":"/docs/walrus-sites/ci-cd-gh-workflow"}}');var t=n(2714),r=n(8885);const o={title:"Preparing Your Deployment Credentials",description:"Guide to setting up GitHub secrets and variables for secure Walrus Sites deployment with Sui wallet credentials.",keywords:["walrus sites","github secrets","deployment credentials","sui wallet","private key","security","authentication"]},l=void 0,a={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Exporting Your Private Key",id:"exporting-your-private-key",level:2},{value:"Funding Your Address",id:"funding-your-address",level:2},{value:"Adding credentials to GitHub",id:"adding-credentials-to-github",level:2}];function d(e){const s={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{TabItem:n,Tabs:i,Term:o}=s;return n||u("TabItem",!0),i||u("Tabs",!0),o||u("Term",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"To allow the GitHub Action to deploy your Walrus Site, it needs to be able to sign transactions on\nyour behalf. This requires securely providing it with your private key and the corresponding public\naddress."}),"\n",(0,t.jsx)(s.p,{children:"This guide will show you how to:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Export a private key from your Sui Wallet or CLI."}),"\n",(0,t.jsxs)(s.li,{children:["Correctly format the key and add it as a ",(0,t.jsx)(s.code,{children:"SUI_KEYSTORE"})," secret in your GitHub repository."]}),"\n",(0,t.jsxs)(s.li,{children:["Add the matching public address as a ",(0,t.jsx)(s.code,{children:"SUI_ADDRESS"})," variable in your GitHub repository."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(s.p,{children:["Before you start, you must have the ",(0,t.jsx)(s.code,{children:"sui"})," binary installed. If you haven't installed it yet, please\nfollow the official ",(0,t.jsx)(s.a,{href:"https://docs.sui.io/guides/developer/getting-started/sui-install",children:"Sui installation\nguide"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"exporting-your-private-key",children:"Exporting Your Private Key"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Best Practice"}),": It's recommended to use a dedicated Sui address for each GitHub workflow rather\nthan reusing addresses across different projects or purposes. This provides better security\nisolation and helps avoid ",(0,t.jsx)(s.a,{href:"https://docs.sui.io/guides/developer/sui-101/avoid-equivocation",children:"gas-coin\nequivocation"})," issues that can\noccur when multiple workflows try to use the same gas coins concurrently."]}),"\n"]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsxs)(n,{label:"From Sui CLI",value:"cli",children:[(0,t.jsx)(s.p,{children:"To export a private key using the command line:"}),(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Generate a new key by running the following command in your terminal:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ sui keytool generate ed25519 # Or secp256k1 or secp256r1\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["This command creates a file in your current directory named ",(0,t.jsx)(s.code,{children:"<SUI_ADDRESS>.key"})," (e.g.,\n",(0,t.jsx)(s.code,{children:"0x123...abc.key"}),"). The filename is your new Sui Address."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The content of this file is the private key in the ",(0,t.jsx)(s.code,{children:"base64WithFlag"})," format. This is the value\nyou need for the ",(0,t.jsx)(s.code,{children:"SUI_KEYSTORE"})," secret."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["You now have both the address (from the filename) for the ",(0,t.jsx)(s.code,{children:"SUI_ADDRESS"})," variable and the key\n(from the file's content) for the ",(0,t.jsx)(s.code,{children:"SUI_KEYSTORE"})," secret."]}),"\n"]}),"\n"]}),(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Note on existing keys"}),"\nIf you wish to use a key you already own, you can find it in the ",(0,t.jsx)(s.code,{children:"~/.sui/sui_config/sui.keystore"}),"\nfile. This file contains a JSON array of all your keys. To find the address for a specific key,\nyou would need to use the ",(0,t.jsx)(s.code,{children:'sui keytool unpack "<the base64 key from sui.keystore>"'})," command."]}),"\n"]})]}),(0,t.jsxs)(n,{label:"From Slush Wallet",value:"slush",children:[(0,t.jsx)(s.p,{children:"This method is recommended if you manage your keys through the Slush browser extension."}),(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Open your Slush extension and select the account you want to use for deployments. Make sure to\ncopy the corresponding Sui Address, as you will need it later for the ",(0,t.jsx)(s.code,{children:"SUI_ADDRESS"})," variable."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Navigate to the account management screen and select ",(0,t.jsx)(s.strong,{children:"Export Private Key"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Copy the provided private key (it will be in bech32 format, starting with ",(0,t.jsx)(s.code,{children:"suiprivkey"}),")."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Use the ",(0,t.jsx)(s.code,{children:"sui keytool convert <suiprivkey...>"})," command to transform your key into the required\nBase64 format. Paste your copied key in place of ",(0,t.jsx)(s.code,{children:"suiprivkey..."}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ sui keytool convert `suiprivkey...`\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"The command produces an output similar to this:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 bech32WithFlag \u2502  suiprivkey............................................................  \u2502\n\u2502 base64WithFlag \u2502  A...........................................                            \u2502\n\u2502 hexWithoutFlag \u2502  ................................................................        \u2502\n\u2502 scheme         \u2502  ed25519                                                                 \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Copy the ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"base64WithFlag"})})," value. This is what you will use for the ",(0,t.jsx)(s.code,{children:"SUI_KEYSTORE"})," secret."]}),"\n"]}),"\n"]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"funding-your-address",children:"Funding Your Address"}),"\n",(0,t.jsxs)(s.p,{children:["Before the GitHub Action can deploy your site, the address you generated needs to be funded with\nboth SUI tokens (for network gas fees) and ",(0,t.jsx)(o,{lookup:"WAL",children:"WAL"})," tokens (for storing your site's data). The method for\nacquiring these tokens differs between Testnet and Mainnet."]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)(n,{label:"Testnet Funding",value:"testnet",children:(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Get SUI tokens"}),": Use the ",(0,t.jsx)(s.a,{href:"https://faucet.sui.io/",children:"official Sui faucet"})," to get free Testnet\nSUI."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsxs)(s.strong,{children:["Get ","WAL"," tokens"]}),": Exchange your new Testnet SUI for Testnet ","WAL"," at a 1:1 rate by running the\n",(0,t.jsx)(s.code,{children:"walrus get-wal"})," command either using the ",(0,t.jsx)(s.code,{children:"walrus get-wal"})," CLI command or visiting\n",(0,t.jsx)(s.a,{href:"https://stake-wal.wal.app/?network=testnet",children:"stake-wal.wal.app"}),' setting network to Testnet and\nusing the "Get ',"WAL",'" button.']}),"\n"]})}),(0,t.jsx)(n,{label:"Mainnet funding",value:"mainnet",children:(0,t.jsxs)(s.p,{children:["For a Mainnet deployment, you will need to acquire both SUI and ","WAL"," tokens from an exchange and\ntransfer them to your deployment address. You can also check Slush Wallet for token swaps to ","WAL",",\nand on-ramp services (availability may vary by region)."]})})]}),"\n",(0,t.jsx)(s.h2,{id:"adding-credentials-to-github",children:"Adding credentials to GitHub"}),"\n",(0,t.jsx)(s.p,{children:"Now, let's add the key and address to your GitHub repository."}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Navigate to your GitHub repository in a web browser."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Click on the ",(0,t.jsx)(s.strong,{children:"Settings"})," tab (located in the top navigation bar of your repository)."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["In the left sidebar, click ",(0,t.jsx)(s.strong,{children:"Secrets and variables"}),", then select ",(0,t.jsx)(s.strong,{children:"Actions"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["You'll see two tabs: ",(0,t.jsx)(s.strong,{children:"Secrets"})," and ",(0,t.jsx)(s.strong,{children:"Variables"}),". Start with the ",(0,t.jsx)(s.strong,{children:"Secrets"})," tab."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Click the ",(0,t.jsx)(s.strong,{children:"New repository secret"})," button."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Name the secret ",(0,t.jsx)(s.code,{children:"SUI_KEYSTORE"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["In the ",(0,t.jsx)(s.strong,{children:"Value"})," field, paste the ",(0,t.jsx)(s.code,{children:"Base64 Key with Flag"})," you copied earlier. It must be\nformatted as a JSON array containing a single string:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'["AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"]\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Click ",(0,t.jsx)(s.strong,{children:"Add secret"})," to save it."]}),"\n",(0,t.jsx)(s.admonition,{type:"warning",children:(0,t.jsx)(s.p,{children:"Make sure to format the keystore as a JSON array with a single string element, not just the raw\nkey value. Include the square brackets and quotes exactly as shown above."})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Next, switch to the ",(0,t.jsx)(s.strong,{children:"Variables"})," tab and click ",(0,t.jsx)(s.strong,{children:"New repository variable"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Name the variable ",(0,t.jsx)(s.code,{children:"SUI_ADDRESS"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["In the ",(0,t.jsx)(s.strong,{children:"Value"})," field, paste the Sui address that corresponds to your private key (for example:\n",(0,t.jsx)(s.code,{children:"0x123abc...def789"}),")."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Click ",(0,t.jsx)(s.strong,{children:"Add variable"})," to save it."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.admonition,{title:"Security reminder",type:"danger",children:(0,t.jsx)(s.p,{children:"Never share your private key or commit it to version control. GitHub secrets are encrypted and only accessible to your workflows, but always verify you're adding secrets correctly."})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.p,{children:"For more information about managing secrets and variables in GitHub Actions, check the official\nGitHub documentation:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://docs.github.com/en/actions/concepts/security/about-secrets",children:"About secrets"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://docs.github.com/en/actions/security-for-github-actions/security-guides/using-secrets-in-github-actions",children:"Using secrets in GitHub Actions"})}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}function u(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8885:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(9378);const t={},r=i.createContext(t);function o(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);