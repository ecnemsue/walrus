"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[9916],{5639:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>b,frontMatter:()=>r,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"dev-guide/dev-operations","title":"Operations","description":"Developer guide to Walrus operations including store, read, certify availability, and delete operations for blob management.","source":"@site/../content/dev-guide/dev-operations.mdx","sourceDirName":"dev-guide","slug":"/dev-guide/dev-operations","permalink":"/docs/dev-guide/dev-operations","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/dev-guide/dev-operations.mdx","tags":[],"version":"current","frontMatter":{"title":"Operations","description":"Developer guide to Walrus operations including store, read, certify availability, and delete operations for blob management.","keywords":["walrus","operations","store","read","certify","delete","blob id","encoding","availability","developer operations"]},"sidebar":"docsSidebar","previous":{"title":"Components","permalink":"/docs/dev-guide/components"},"next":{"title":"Storage Costs","permalink":"/docs/dev-guide/costs"}}');var i=n(2714),s=n(8885);const r={title:"Operations",description:"Developer guide to Walrus operations including store, read, certify availability, and delete operations for blob management.",keywords:["walrus","operations","store","read","certify","delete","blob id","encoding","availability","developer operations"]},a=void 0,l={},d=[{value:"Blob Encoding and Blob ID",id:"blob-encoding-and-blob-id",level:2},{value:"Store",id:"store",level:2},{value:"Read",id:"read",level:2},{value:"Certify Availability",id:"certify-availability",level:2},{value:"Delete",id:"delete",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Term:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.h2,{id:"blob-encoding-and-blob-id",children:[(0,i.jsx)(n,{lookup:"Blob",children:"Blob"})," Encoding and ",(0,i.jsx)(n,{lookup:"Blob ID",children:"Blob ID"})]}),"\n",(0,i.jsxs)(t.p,{children:["Walrus stores ","blobs"," across ",(0,i.jsx)(n,{lookup:"Storage node",children:"storage nodes"})," in an ",(0,i.jsx)(t.a,{href:"/docs/design/encoding",children:"encoded form"}),", and refers\nto ","blobs"," by their ",(0,i.jsx)(t.em,{children:"blob ID"}),". The ","blob ID"," is deterministically derived from the content of a ","blob","\nand the Walrus configuration. The ","blob ID"," of two files with the same content will be the same."]}),"\n",(0,i.jsxs)(t.p,{children:["You can derive the ","blob ID"," of a file locally using the command: ",(0,i.jsx)(t.code,{children:"walrus blob-id <file path>"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"store",children:"Store"}),"\n",(0,i.jsxs)(t.p,{children:["Walrus may be used to ",(0,i.jsxs)(t.strong,{children:["store a ","blob"]}),", via the native ",(0,i.jsx)(n,{lookup:"Client",children:"client"})," APIs or a ",(0,i.jsx)(n,{lookup:"Publisher",children:"publisher"}),"."]}),"\n",(0,i.jsx)(t.admonition,{title:"Public access",type:"danger",children:(0,i.jsxs)(t.p,{children:[(0,i.jsxs)(t.strong,{children:["All ","blobs"," stored in Walrus are public and discoverable by all."]})," Therefore you must not use Walrus\nto store anything that contains secrets or private data without additional measures to protect\nconfidentiality."]})}),"\n",(0,i.jsxs)(t.p,{children:["Under the hood a number of operations happen both on Sui as well as on ","storage nodes",":"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["The ","client"," or ","publisher"," encodes the ","blob"," and derives a ",(0,i.jsx)(t.em,{children:"blob ID"})," that identifies the ","blob",". This\nis a ",(0,i.jsx)(t.code,{children:"u256"})," often encoded as a URL-safe base64 string."]}),"\n",(0,i.jsxs)(t.li,{children:["A transaction is executed on Sui to purchase some storage from the system object, and then to\n",(0,i.jsxs)(t.em,{children:["register the ","blob ID"]})," occupying this storage. ","Client"," APIs return the ",(0,i.jsxs)(t.em,{children:["Sui ","blob"," object ID"]}),". The\ntransactions use SUI to purchase storage and pay for gas."]}),"\n",(0,i.jsxs)(t.li,{children:["Encoded slivers of the ","blob"," are distributed to all ","storage nodes",". They each sign a receipt."]}),"\n",(0,i.jsxs)(t.li,{children:["Signed receipts are aggregated and submitted to the Sui ","blob"," object to ",(0,i.jsxs)(t.em,{children:["certify the ","blob"]}),".\nCertifying a ","blob"," emits a Sui event with the ","blob ID"," and the period of availability."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["A ","blob"," is considered available on Walrus once the corresponding Sui ","blob"," object has been\ncertified in the final step. The steps involved in a store operation can be executed by the binary\n","client",", or a ","publisher"," that accepts and publishes ","blobs"," via HTTP."]}),"\n",(0,i.jsxs)(t.p,{children:["Walrus currently allows the storage of ","blobs"," up to a maximum size that may be determined\nthrough the ",(0,i.jsx)(t.a,{href:"/docs/usage/client-cli#walrus-system-information",children:(0,i.jsx)(t.code,{children:"walrus info"})})," CLI command. The\nmaximum ","blob"," size is currently 13.3\xa0GiB. You may store larger ","blobs"," by splitting them into\nsmaller chunks."]}),"\n",(0,i.jsxs)(t.p,{children:["Blobs"," are stored for a certain number of ",(0,i.jsx)(t.em,{children:"epochs"}),", as specified at the time they were stored. Walrus\n","storage nodes"," ensure that within these epochs a read succeeds. The current Mainnet uses an epoch\nduration of 2 weeks."]}),"\n",(0,i.jsx)(t.h2,{id:"read",children:"Read"}),"\n",(0,i.jsxs)(t.p,{children:["Walrus can also be used to ",(0,i.jsxs)(t.strong,{children:["read a ","blob"]})," after it is stored by providing its ","blob ID",".\nA read is executed by performing the following steps:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["The system object on Sui is read to determine the Walrus ","storage node"," committee."]}),"\n",(0,i.jsxs)(t.li,{children:["A number of ","storage nodes"," are queried for ",(0,i.jsx)(n,{lookup:"Blob metadata",children:"blob metadata"})," and the slivers they store."]}),"\n",(0,i.jsxs)(t.li,{children:["The ","blob"," is reconstructed from the recovered slivers and checked against the ","blob ID","."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["The steps involved in the read operation are performed by the binary ","client",", or the ",(0,i.jsx)(n,{lookup:"Aggregator",children:"aggregator"}),"\nservice that exposes an HTTP interface to read ","blobs",". Reads are extremely resilient and will succeed\nin recovering the ","blob"," in all cases even if up to one-third of ","storage nodes"," are unavailable. In\nmost cases, after synchronization is complete, ","blob"," can be read even if two-thirds of ","storage nodes","\nare down."]}),"\n",(0,i.jsx)(t.h2,{id:"certify-availability",children:"Certify Availability"}),"\n",(0,i.jsxs)(t.p,{children:["Walrus can be used to ",(0,i.jsxs)(t.strong,{children:["certify the availability of a ","blob"]})," using Sui. Checking that this happened\nmay currently be done in 3 different ways:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["A Sui SDK read can be\nused to authenticate the certified ","blob"," event emitted when the ","blob ID"," was certified on Sui. The\n","client"," ",(0,i.jsx)(t.code,{children:"walrus blob-status"})," command may be used to identify the event ID that needs to be checked."]}),"\n",(0,i.jsxs)(t.li,{children:["A Sui SDK read may be\nused to authenticate the Sui ","blob"," object corresponding to the ","blob ID",", and check it is certified,\nbefore the ",(0,i.jsx)(n,{lookup:"Expiry",children:"expiry"})," epoch, and not deletable."]}),"\n",(0,i.jsxs)(t.li,{children:["A Sui smart contract can read the ","blob"," object on Sui (or a reference to it) to check\nit is certified, before the ","expiry"," epoch, and not deletable."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["The underlying protocol of the\n",(0,i.jsx)(t.a,{href:"https://github.com/MystenLabs/sui/tree/main/crates/sui-light-client",children:"Sui light client"}),"\nreturns digitally signed evidence for emitted events\nor objects, and can be used by off-line or non-interactive applications as a proof of availability\nfor the ","blob ID"," for a certain number of epochs."]}),"\n",(0,i.jsxs)(t.p,{children:["Once a ","blob"," is certified, Walrus will ensure that sufficient slivers will always be\navailable on ","storage nodes"," to recover it within the specified epochs."]}),"\n",(0,i.jsx)(t.h2,{id:"delete",children:"Delete"}),"\n",(0,i.jsxs)(t.p,{children:["Stored ","blobs"," can be optionally set as deletable by the ",(0,i.jsx)(n,{lookup:"User",children:"user"})," that creates them. This metadata is\nstored in the Sui ","blob"," object, and whether a ","blob"," is deletable or not is included in certified ","blob","\nevents. A ",(0,i.jsx)(n,{lookup:"Deletable blob",children:"deletable blob"})," may be deleted by the owner of the ","blob"," object, to reclaim and re-use\nthe storage resource associated with it."]}),"\n",(0,i.jsxs)(t.p,{children:["If no other copies of the ","blob"," exist in Walrus, deleting a ","blob"," will eventually make it\nunrecoverable using read commands. However, if other copies of the ","blob"," exist on Walrus, a delete\ncommand will reclaim storage space for the ","user"," that invoked it, but will not make the ","blob","\nunavailable until all other copies have been deleted or expire."]})]})}function b(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8885:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var o=n(9378);const i={},s=o.createContext(i);function r(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);