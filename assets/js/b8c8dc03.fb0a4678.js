"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[8016],{1143:(e,n,t)=>{t.d(n,{A:()=>w});var r=t(9378),s=t(3526),a=t(3063),i=t(9489),o=t(1472),l=t(5848),c=t(425),d=t(5638);function u(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r}))}(t);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function b({queryString:e=!1,groupId:n}){const t=(0,i.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(s),(0,r.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})},[s,t])]}function g(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,a=h(e),[i,l]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:a})),[c,u]=b({queryString:t,groupId:s}),[g,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,s]=(0,d.Dv)(n);return[t,(0,r.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),m=(()=>{const e=c??g;return p({value:e,tabValues:a})?e:null})();(0,o.A)(()=>{m&&l(m)},[m]);return{selectedValue:i,selectValue:(0,r.useCallback)(e=>{if(!p({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),f(e)},[u,f,a]),tabValues:a}}var f=t(2700);const m={tabList:"tabList_whlr",tabItem:"tabItem_E5IJ"};var j=t(2714);function x({className:e,block:n,selectedValue:t,selectValue:r,tabValues:i}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,a.a_)(),c=e=>{const n=e.currentTarget,s=o.indexOf(n),a=i[s].value;a!==t&&(l(n),r(a))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:r})=>(0,j.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...r,className:(0,s.A)("tabs__item",m.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function v({lazy:e,children:n,selectedValue:t}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===t);return e?(0,r.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:a.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function y(e){const n=g(e);return(0,j.jsxs)("div",{className:(0,s.A)("tabs-container",m.tabList),children:[(0,j.jsx)(x,{...n,...e}),(0,j.jsx)(v,{...n,...e})]})}function w(e){const n=(0,f.A)();return(0,j.jsx)(y,{...e,children:u(e.children)},String(n))}},1184:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/files/operators-2a82ea3932c5691b15c9984989deedfa.json"},6904:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>b,contentTitle:()=>p,default:()=>m,frontMatter:()=>h,metadata:()=>r,toc:()=>g});const r=JSON.parse('{"id":"usage/web-api","title":"Client Daemon Mode & HTTP API","description":"Complete guide to Walrus HTTP API including daemon mode, public services, store/read operations, and quilt management.","source":"@site/../content/usage/web-api.mdx","sourceDirName":"usage","slug":"/usage/web-api","permalink":"/docs/usage/web-api","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/usage/web-api.mdx","tags":[],"version":"current","frontMatter":{"title":"Client Daemon Mode & HTTP API","description":"Complete guide to Walrus HTTP API including daemon mode, public services, store/read operations, and quilt management.","keywords":["walrus","http api","daemon mode","aggregator","publisher","rest api","web service","public services","quilt api"]},"sidebar":"docsSidebar","previous":{"title":"JSON Mode","permalink":"/docs/usage/json-api"},"next":{"title":"Software Development Kits (SDKs) and Other Tools","permalink":"/docs/usage/sdks"}}');var s=t(2714),a=t(8885),i=t(9378),o=t(1143),l=t(7609),c=t(6210);const d={container:"container_gG7i",title:"title_cejj",searchContainer:"searchContainer_v2iw",searchInput:"searchInput_DzbU",tabContent:"tabContent_CReR",tabDescription:"tabDescription_ZFRT",operatorsList:"operatorsList_OglV",operatorItem:"operatorItem_rszP",operatorContent:"operatorContent_hG0S",operatorHeader:"operatorHeader_Lfg3",operatorUrl:"operatorUrl_RdjC",operatorType:"operatorType_Z0B2",aggregator:"aggregator_ONi6",publisher:"publisher_RPj3",operatorDetails:"operatorDetails_KTbk",operatorName:"operatorName_kaS_",operatorFlags:"operatorFlags_abjg",flag:"flag_HggW",positive:"positive_ySn8",negative:"negative_BVio",loading:"loading_iKth",error:"error_Sm3w",empty:"empty_WEGR"},u=()=>{const[e,n]=(0,i.useState)(null),[t,r]=(0,i.useState)(!0),[a,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(""),b=(0,c.Ay)("/operators.json");(0,i.useEffect)(()=>{(async()=>{try{const e=await fetch(b);if(!e.ok)throw new Error("Failed to fetch operators data");const t=await e.json();n(t),r(!1)}catch(e){u(e instanceof Error?e.message:"Unknown error occurred"),r(!1)}})()},[]);const g=e=>{const n=[];return e.aggregators&&Object.entries(e.aggregators).forEach(([e,t])=>{n.push({url:e,operator:t.operator,cache:t.cache,functional:t.functional,type:"aggregator"})}),e.publishers&&Object.entries(e.publishers).forEach(([e,t])=>{n.push({url:e,operator:t.operator,cache:t.cache,functional:t.functional,type:"publisher"})}),n.sort((e,n)=>e.operator.localeCompare(n.operator))},f=(e,n)=>{if(!n.trim())return e;const t=n.toLowerCase();return e.filter(e=>e.operator.toLowerCase().includes(t)||e.url.toLowerCase().includes(t)||e.type.toLowerCase().includes(t))},m=(0,i.useMemo)(()=>e?g(e.mainnet):[],[e]),j=(0,i.useMemo)(()=>e?g(e.testnet):[],[e]),x=(0,i.useMemo)(()=>f(m,h),[m,h]),v=(0,i.useMemo)(()=>f(j,h),[j,h]),y=e=>0===e.length?(0,s.jsx)("div",{className:d.empty,children:h?"No operators match your search criteria":"No operators available"}):(0,s.jsx)("ul",{className:d.operatorsList,children:e.map(e=>(0,s.jsx)("li",{className:d.operatorItem,children:(0,s.jsxs)("div",{className:d.operatorContent,children:[(0,s.jsxs)("div",{className:d.operatorHeader,children:[(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:d.operatorUrl,children:e.url}),(0,s.jsx)("span",{className:`${d.operatorType} ${d[e.type]}`,children:e.type})]}),(0,s.jsxs)("div",{className:d.operatorDetails,children:[(0,s.jsxs)("span",{className:d.operatorName,children:["Operated by: ",e.operator]}),(0,s.jsxs)("div",{className:d.operatorFlags,children:[void 0!==e.cache&&(0,s.jsxs)("span",{className:`${d.flag} ${e.cache?d.positive:d.negative}`,children:["Cache: ",e.cache?"Yes":"No"]}),void 0!==e.functional&&(0,s.jsxs)("span",{className:`${d.flag} ${e.functional?d.positive:d.negative}`,children:["Functional: ",e.functional?"Yes":"No"]})]})]})]})},e.url))});return t?(0,s.jsx)("div",{className:d.loading,children:"Loading operators..."}):a?(0,s.jsxs)("div",{className:d.error,children:["Error: ",a]}):(0,s.jsxs)("div",{className:d.container,children:[(0,s.jsx)("h3",{className:d.title,children:"Walrus Operators"}),(0,s.jsx)("div",{className:d.searchContainer,children:(0,s.jsx)("input",{type:"text",placeholder:"Search by operator name, URL, or type...",value:h,onChange:e=>p(e.target.value),className:d.searchInput})}),(0,s.jsxs)(o.A,{children:[(0,s.jsx)(l.A,{value:"mainnet",label:"Mainnet",default:!0,children:(0,s.jsxs)("div",{className:d.tabContent,children:[(0,s.jsxs)("p",{className:d.tabDescription,children:["Mainnet operators (",x.length," results)"]}),y(x)]})}),(0,s.jsx)(l.A,{value:"testnet",label:"Testnet",children:(0,s.jsxs)("div",{className:d.tabContent,children:[(0,s.jsxs)("p",{className:d.tabDescription,children:["Testnet operators (",v.length," results)"]}),y(v)]})})]})]})},h={title:"Client Daemon Mode & HTTP API",description:"Complete guide to Walrus HTTP API including daemon mode, public services, store/read operations, and quilt management.",keywords:["walrus","http api","daemon mode","aggregator","publisher","rest api","web service","public services","quilt api"]},p=void 0,b={},g=[{value:"HTTP API Usage",id:"http-api-usage",level:2},{value:"Store",id:"store",level:3},{value:"Read",id:"read",level:3},{value:"Reading by Object ID",id:"reading-by-object-id",level:4},{value:"Consistency checks",id:"consistency-checks",level:4},{value:"Quilt HTTP APIs",id:"quilt-http-apis",level:3},{value:"Storing quilts",id:"storing-quilts",level:4},{value:"Reading Quilts",id:"reading-quilts",level:4},{value:"By Quilt Patch ID",id:"by-quilt-patch-id",level:5},{value:"By Quilt ID and Identifier",id:"by-quilt-id-and-identifier",level:5},{value:"Using a public aggregator or publisher",id:"public-services",level:2},{value:"Aggregators and publishers list",id:"agg-list",level:3}];function f(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{Term:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["In addition to the CLI and JSON modes, the ",(0,s.jsx)(r,{lookup:"Client",children:"Walrus client"})," offers a ",(0,s.jsx)(n.em,{children:"daemon mode"}),". In this mode, it\nruns a simple web server offering HTTP interfaces to store and read ",(0,s.jsx)(r,{lookup:"Blob",children:"blobs"})," in an ",(0,s.jsx)(n.em,{children:(0,s.jsx)(r,{lookup:"Aggregator",children:"aggregator"})})," and\n",(0,s.jsx)(n.em,{children:(0,s.jsx)(r,{lookup:"Publisher",children:"publisher"})})," role respectively. We also offer\n",(0,s.jsx)(n.a,{href:"#public-services",children:"public aggregator and publisher services"})," to try the Walrus HTTP APIs without\nthe need to run a local ","client",". See how to\n",(0,s.jsx)(n.a,{href:"/docs/operator-guide/aggregator",children:"operate an aggregator or publisher"})," in the operator documentation."]}),"\n",(0,s.jsx)(n.h2,{id:"http-api-usage",children:"HTTP API Usage"}),"\n",(0,s.jsxs)(n.p,{children:["For the following examples, we assume you set the ",(0,s.jsx)(n.code,{children:"AGGREGATOR"})," and ",(0,s.jsx)(n.code,{children:"PUBLISHER"})," environment variables\nto your desired ","aggregator"," and ","publisher",", respectively. For example, the instances run by Mysten\nLabs on Walrus Testnet (see ",(0,s.jsx)(n.a,{href:"#public-services",children:"below"})," for further public options):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"$ AGGREGATOR=https://aggregator.walrus-testnet.walrus.space\n$ PUBLISHER=https://publisher.walrus-testnet.walrus.space\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"API specification",type:"tip",children:(0,s.jsxs)(n.p,{children:["Walrus aggregators and publishers expose their API specifications at the path ",(0,s.jsx)(n.code,{children:"/v1/api"}),". You can\nview this in the browser, for example, at ",(0,s.jsx)(n.a,{href:"https://aggregator.walrus-testnet.walrus.space/v1/api",children:"https://aggregator.walrus-testnet.walrus.space/v1/api"}),". The latest version of these specifications are also available ",(0,s.jsx)(n.a,{href:"https://github.com/MystenLabs/walrus/tree/main/crates/walrus-service",children:"on GitHub"}),"\nin HTML and YAML format."]})}),"\n",(0,s.jsx)(n.h3,{id:"store",children:"Store"}),"\n",(0,s.jsxs)(n.p,{children:["You can interact with the daemon through simple HTTP PUT requests. For example, with\n",(0,s.jsx)(n.a,{href:"https://curl.se",children:"cURL"}),", you can store ","blobs"," using a ","publisher"," or daemon as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'# store the string `some string` for 1 storage epoch\n$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some string"\n# store file `some/file` for 1 storage epoch\n$ curl -X PUT "$PUBLISHER/v1/blobs" --upload-file "some/file"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["You can control how the new ","blob"," should be created through several query parameters, which can be\ncombined and are all documented in the ",(0,s.jsx)(n.a,{href:"#http-api-usage",children:"OpenAPI specification mentioned above"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The lifetime of the ","blob"," can be specified through the ",(0,s.jsx)(n.code,{children:"epochs"})," parameter. If the parameter is\nomitted, ","blobs"," are stored for one epoch."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'# store file `some/file` for 5 storage epochs\n$ curl -X PUT "$PUBLISHER/v1/blobs?epochs=5" --upload-file "some/file"\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Similar to the CLI, the ","publisher"," API allows you to specify whether a ","blob"," should be stored as\npermanent or deletable through a query parameter ",(0,s.jsx)(n.code,{children:"permanent=true"})," or ",(0,s.jsx)(n.code,{children:"deletable=true"}),",\nrespectively:"]}),"\n",(0,s.jsxs)(n.p,{children:["Store file ",(0,s.jsx)(n.code,{children:"some/file"})," as a ",(0,s.jsx)(r,{lookup:"Deletable blob",children:"deletable blob"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "$PUBLISHER/v1/blobs?deletable=true" --upload-file "some/file"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Store file ",(0,s.jsx)(n.code,{children:"some/file"})," as a ",(0,s.jsx)(r,{lookup:"Permanent blob",children:"permanent blob"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "$PUBLISHER/v1/blobs?permanent=true" --upload-file "some/file"\n'})}),"\n",(0,s.jsx)(n.admonition,{title:"Change of default blob persistence",type:"warning",children:(0,s.jsxs)(n.p,{children:["Up to (including) version 1.32, the CLI and ",(0,s.jsx)(n.a,{href:"/docs/usage/web-api",children:"publisher"})," store ","blobs"," as permanent by default, requiring the ",(0,s.jsx)(r,{lookup:"User",children:"user"})," to explicitly specify a ","blob"," to be deletable. Starting with version 1.33, newly stored ","blobs"," are ",(0,s.jsx)(n.em,{children:"deletable"})," by default. If you care about the ","blob"," persistence, make sure to use the appropriate flag."]})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["You can specify an address to which the resulting ",(0,s.jsx)(n.code,{children:"Blob"})," object should be sent through the\n",(0,s.jsx)(n.code,{children:"send-object-to"})," parameter:"]}),"\n",(0,s.jsxs)(n.p,{children:["Store file ",(0,s.jsx)(n.code,{children:"some/file"})," and send the ","blob"," object to ",(0,s.jsx)(n.code,{children:"$ADDRESS"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "$PUBLISHER/v1/blobs?send_object_to=$ADDRESS" --upload-file "some/file"\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The store HTTP API end points return information about the ","blob"," stored in JSON format. When a ","blob","\nis stored for the first time, a ",(0,s.jsx)(n.code,{children:"newlyCreated"})," field contains information about the\nnew ","blob",":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some other string"\n'})}),"\n",(0,s.jsx)(n.p,{children:"If successful, the console responds:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'{\n  "newlyCreated": {\n    "blobObject": {\n    "id": "0xe91eee8c5b6f35b9a250cfc29e30f0d9e5463a21fd8d1ddb0fc22d44db4eac50",\n    "registeredEpoch": 34,\n    "blobId": "M4hsZGQ1oCktdzegB6HnI6Mi28S2nqOPHxK-W7_4BUk",\n    "size": 17,\n    "encodingType": "RS2",\n    "certifiedEpoch": 34,\n    "storage": {\n        "id": "0x4748cd83217b5ce7aa77e7f1ad6fc5f7f694e26a157381b9391ac65c47815faf",\n        "startEpoch": 34,\n        "endEpoch": 35,\n        "storageSize": 66034000\n    },\n    "deletable": false\n    },\n    "resourceOperation": {\n    "registerFromScratch": {\n        "encodedLength": 66034000,\n        "epochsAhead": 1\n    }\n    },\n    "cost": 132300\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The information returned is the content of the ",(0,s.jsx)(n.a,{href:"/docs/dev-guide/sui-struct",children:"Sui blob object"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["When the ","publisher"," finds a certified ","blob"," with the same ",(0,s.jsx)(r,{lookup:"Blob ID",children:"blob ID"})," and a sufficient validity period,\nit returns a ",(0,s.jsx)(n.code,{children:"alreadyCertified"})," JSON structure:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some other string"\n'})}),"\n",(0,s.jsx)(n.p,{children:"If successful, the console responds:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'{\n  "alreadyCertified": {\n    "blobId": "M4hsZGQ1oCktdzegB6HnI6Mi28S2nqOPHxK-W7_4BUk",\n    "event": {\n    "txDigest": "4XQHFa9S324wTzYHF3vsBSwpUZuLpmwTHYMFv9nsttSs",\n    "eventSeq": "0"\n    },\n    "endEpoch": 35\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The field ",(0,s.jsx)(n.code,{children:"event"})," returns the ",(0,s.jsx)(n.a,{href:"/docs/dev-guide/sui-struct",children:"Sui event ID"})," that can be used to\nfind the transaction that created the Sui ","Blob"," object on the Sui explorer or using a Sui SDK."]}),"\n",(0,s.jsx)(n.h3,{id:"read",children:"Read"}),"\n",(0,s.jsxs)(n.p,{children:["Blobs"," may be read from an ","aggregator"," or daemon using HTTP GET using their ","blob ID",".\nFor example, the following cURL command reads a ","blob"," and writes it to an output file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl "$AGGREGATOR/v1/blobs/<some blob ID>" -o <some file name>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Alternatively you may print the contents of a ","blob"," in the terminal with the cURL command:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl "$AGGREGATOR/v1/blobs/<some blob ID>"\n'})}),"\n",(0,s.jsx)(n.admonition,{title:"Content sniffing",type:"tip",children:(0,s.jsxs)(n.p,{children:["Modern browsers will attempt to sniff the content type for such resources, and will generally do a\ngood job of inferring content types for media. However, the ","aggregator"," on purpose prevents such\nsniffing from inferring dangerous executable types such as JavaScript or style sheet types."]})}),"\n",(0,s.jsx)(n.h4,{id:"reading-by-object-id",children:"Reading by Object ID"}),"\n",(0,s.jsxs)(n.p,{children:["Blobs"," may also be read by using the object ID of a Sui ","blob"," object or a shared ","blob",".\nFor example the following\ncURL command downloads the ","blob"," corresponding to a Sui ","blob"," with a specific object ID:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl "$AGGREGATOR/v1/blobs/by-object-id/<object-id>" -o <some file name>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Downloading ","blobs"," by object ID allows the use of attributes to set some HTTP headers.\nThe ","aggregator"," recognizes the attribute keys ",(0,s.jsx)(n.code,{children:"content-disposition"}),", ",(0,s.jsx)(n.code,{children:"content-encoding"}),",\n",(0,s.jsx)(n.code,{children:"content-language"}),", ",(0,s.jsx)(n.code,{children:"content-location"}),", ",(0,s.jsx)(n.code,{children:"content-type"}),", and ",(0,s.jsx)(n.code,{children:"link"}),", and when present returns\nthe values in the corresponding HTTP headers."]}),"\n",(0,s.jsx)(n.h4,{id:"consistency-checks",children:"Consistency checks"}),"\n",(0,s.jsxs)(n.p,{children:["The consistency checks performed by the ","aggregator"," are the same as the ones ",(0,s.jsx)(n.a,{href:"/docs/usage/client-cli#consistency-checks",children:"performed by the CLI"}),".\nFor special use cases, the ",(0,s.jsx)(n.a,{href:"/docs/design/encoding",children:"strict consistency check"}),"\ncan be enabled by adding a query parameter ",(0,s.jsx)(n.code,{children:"strict_consistency_check=true"})," (starting with ",(0,s.jsx)(n.code,{children:"v1.35"}),").\nIf the writer of the ","blob"," is known and trusted, the consistency check can be disabled by adding a\nquery parameter ",(0,s.jsx)(n.code,{children:"skip_consistency_check=true"})," (starting with ",(0,s.jsx)(n.code,{children:"v1.36"}),")."]}),"\n",(0,s.jsx)(n.h3,{id:"quilt-http-apis",children:"Quilt HTTP APIs"}),"\n",(0,s.jsxs)(n.p,{children:["Walrus supports storing and retrieving multiple ","blobs"," as a single unit called a ",(0,s.jsx)(n.a,{href:"/docs/usage/quilt",children:"quilt"}),".\nThe publishers and aggregators support ",(0,s.jsx)(n.em,{children:"quilt"})," related operations."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"})," Quilt APIs are supported with Walrus ",(0,s.jsx)(n.em,{children:"1.29"})," and higher."]}),"\n",(0,s.jsx)(n.h4,{id:"storing-quilts",children:"Storing quilts"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["All the query parameters available for storing regular ","blobs"," (see ",(0,s.jsx)(n.a,{href:"#store",children:"Store"})," section above) can also be used when storing quilts."]})}),"\n",(0,s.jsxs)(n.p,{children:["Use the following ","publisher"," API to store multiple ","blobs"," as a quilt."]}),"\n",(0,s.jsxs)(n.p,{children:["Store two files ",(0,s.jsx)(n.code,{children:"document.pdf"})," and ",(0,s.jsx)(n.code,{children:"image.png"}),", with custom identifiers ",(0,s.jsx)(n.code,{children:"contract-v2"})," and\n",(0,s.jsx)(n.code,{children:"logo-2024"}),", respectively:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "$PUBLISHER/v1/quilts?epochs=5" \\\n  -F "contract-v2=@document.pdf" \\\n  -F "logo-2024=@image.png"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Store two files with Walrus-native metadata. The metadata are assigned to the ","blob"," with the same identifier. Note: ",(0,s.jsx)(n.code,{children:"_metadata"})," must be used as the field name for Walrus-native metadata."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "$PUBLISHER/v1/quilts?epochs=5" \\\n  -F "quilt-manual=@document.pdf" \\\n  -F "logo-2025=@image.png" \\\n  -F \'_metadata=[\n    {"identifier": "quilt-manual", "tags": {"creator": "walrus", "version": "1.0"}},\n    {"identifier": "logo-2025", "tags": {"type": "logo", "format": "png"}}\n  ]\'\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Identifiers must be unique within a quilt."})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Since identifiers cannot start with ",(0,s.jsx)(n.code,{children:"_"}),", the field name ",(0,s.jsx)(n.code,{children:"_metadata"})," is reserved for Walrus native\nmetadata and won't conflict with ","user","-defined identifiers. See\n",(0,s.jsx)(n.a,{href:"/docs/usage/quilt",children:"Quilt documentation"})," for complete identifier restrictions."]})}),"\n",(0,s.jsxs)(n.p,{children:["The quilt store API returns a JSON response with information about the stored quilt, including\nthe quilt ID (blobId) and individual ","blob"," patch IDs that can be used to retrieve specific ","blobs","\nlater. The following example shows the command and response (the actual JSON output is returned\nas a single line; it's formatted here for readability):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "http://127.0.0.1:31415/v1/quilts?epochs=1" \\\n  -F "walrus.jpg=@./walrus-33.jpg" \\\n  -F "another_walrus.jpg=@./walrus-46.jpg"\n'})}),"\n",(0,s.jsx)(n.p,{children:"If successful, the console responds:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'{\n  "blobStoreResult": {\n    "newlyCreated": {\n    "blobObject": {\n        "id": "0xe6ac1e1ac08a603aef73a34328b0b623ffba6be6586e159a1d79c5ef0357bc02",\n        "registeredEpoch": 103,\n        "blobId": "6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKo",\n        "size": 1782224,\n        "encodingType": "RS2",\n        "certifiedEpoch": null,\n        "storage": {\n        "id": "0xbc8ff9b4071927689d59468f887f94a4a503d9c6c5ef4c4d97fcb475a257758f",\n        "startEpoch": 103,\n        "endEpoch": 104,\n        "storageSize": 72040000\n        },\n        "deletable": false\n    },\n    "resourceOperation": {\n        "registerFromScratch": {\n        "encodedLength": 72040000,\n        "epochsAhead": 1\n        }\n    },\n    "cost": 12075000\n    }\n  },\n  "storedQuiltBlobs": [\n    {\n    "identifier": "another_walrus.jpg",\n    "quiltPatchId": "6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKoBAQDQAA"\n    },\n    {\n    "identifier": "walrus.jpg",\n    "quiltPatchId": "6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKoB0AB7Ag"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"reading-quilts",children:"Reading Quilts"}),"\n",(0,s.jsxs)(n.p,{children:["There are two ways to retrieve ","blobs"," from a quilt via the ","aggregator"," APIs:"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Currently, only one ","blob"," can be retrieved per request. Bulk retrieval of multiple ","blobs"," from a\nquilt in a single request is not yet supported."]})}),"\n",(0,s.jsx)(n.h5,{id:"by-quilt-patch-id",children:"By Quilt Patch ID"}),"\n",(0,s.jsxs)(n.p,{children:["Each ","blob"," in a quilt has a unique patch ID. You can retrieve a specific ","blob"," using its patch ID."]}),"\n",(0,s.jsxs)(n.p,{children:["Retrieve a ","blob"," using its quilt patch ID:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl "$AGGREGATOR/v1/blobs/by-quilt-patch-id/6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKoBAQDQAA" \\\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["QuiltPatchIds can be obtained from the store quilt output (as shown above) or by using the\n",(0,s.jsx)(n.a,{href:"/docs/usage/client-cli#batch-store",children:(0,s.jsx)(n.code,{children:"list-patches-in-quilt"})})," CLI command."]})}),"\n",(0,s.jsx)(n.h5,{id:"by-quilt-id-and-identifier",children:"By Quilt ID and Identifier"}),"\n",(0,s.jsxs)(n.p,{children:["You can also retrieve a ","blob"," using the quilt ID and the ","blob","'s identifier."]}),"\n",(0,s.jsxs)(n.p,{children:["Retrieve a ","blob"," with identifier ",(0,s.jsx)(n.code,{children:"walrus.jpg"})," from the quilt."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'$ curl "$AGGREGATOR/v1/blobs/by-quilt-id/6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKo/walrus.jpg" \\\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Both methods return the raw ","blob"," bytes in the response body. Metadata such as the ","blob"," identifier\nand tags are returned as HTTP headers:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"X-Quilt-Patch-Identifier"}),": The identifier of the ","blob"," within the quilt"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ETag"}),": The patch ID or quilt ID for caching purposes"]}),"\n",(0,s.jsxs)(n.li,{children:["Additional custom headers from ","blob"," tags (if configured)"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"public-services",children:["Using a public ","aggregator"," or ","publisher"]}),"\n",(0,s.jsxs)(n.p,{children:["For some use cases (e.g., a public website), or to just try out the HTTP API, a publicly accessible\n","aggregator"," and/or ","publisher"," is required. On Walrus Testnet, many entities run public aggregators and\npublishers. On Mainnet, there are no public publishers without authentication, as they consume both\nSUI and ",(0,s.jsx)(r,{lookup:"WAL",children:"WAL"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["See the ",(0,s.jsx)(n.a,{href:"#agg-list",children:"aggregators and publishers list"})," below for public services on Mainnet and Testnet. We also\nprovide the ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(1184).A+"",children:"operator lists in JSON format"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"The operator list in JSON format includes additional info about aggregators, namely whether they are deployed with caching functionality and whether they are found to be functional. The list is updated once per week."})}),"\n","\n",(0,s.jsx)(n.h3,{id:"agg-list",children:"Aggregators and publishers list"}),"\n",(0,s.jsx)(u,{}),"\n",(0,s.jsxs)(n.p,{children:["Most of these limit requests to 10 MiB by default. If you want to upload larger files, you need to\n",(0,s.jsx)(n.a,{href:"/docs/operator-guide/aggregator#local-daemon",children:"run your own publisher"})," or use\nthe ",(0,s.jsx)(n.a,{href:"/docs/usage/client-cli",children:"CLI"}),"."]})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(f,{...e})}):f(e)}},7609:(e,n,t)=>{t.d(n,{A:()=>i});t(9378);var r=t(3526);const s={tabItem:"tabItem_IB0l"};var a=t(2714);function i({children:e,hidden:n,className:t}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.tabItem,t),hidden:n,children:e})}},8885:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var r=t(9378);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);