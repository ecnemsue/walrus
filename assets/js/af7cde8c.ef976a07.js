"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[7314],{4162:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>n,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"walrus-sites/restrictions","title":"Known Restrictions","description":"Overview of known restrictions and limitations when developing and deploying Walrus Sites.","source":"@site/../content/walrus-sites/restrictions.mdx","sourceDirName":"walrus-sites","slug":"/walrus-sites/restrictions","permalink":"/docs/walrus-sites/restrictions","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/walrus-sites/restrictions.mdx","tags":[],"version":"current","frontMatter":{"title":"Known Restrictions","description":"Overview of known restrictions and limitations when developing and deploying Walrus Sites.","keywords":["walrus sites","restrictions","limitations","development","secret values","redirects","portal restrictions"]},"sidebar":"sitesSidebar","previous":{"title":"Avoiding Duplicate-Content SEO in Custom Portals","permalink":"/docs/walrus-sites/avoid-duplicate-content-seo"}}');var i=s(2714),o=s(8885);const n={title:"Known Restrictions",description:"Overview of known restrictions and limitations when developing and deploying Walrus Sites.",keywords:["walrus sites","restrictions","limitations","development","secret values","redirects","portal restrictions"]},a=void 0,l={},c=[{value:"No secret values",id:"no-secret-values",level:2},{value:"There is a maximum redirect depth",id:"there-is-a-maximum-redirect-depth",level:2},{value:"There is a special <code>__wal__</code> path",id:"there-is-a-special-__wal__-path",level:2},{value:"Service-worker portal limitations",id:"service-worker-portal-limitations",level:2},{value:"Service-worker portals, can&#39;t serve sites based on service workers",id:"service-worker-portals-cant-serve-sites-based-on-service-workers",level:3},{value:"iOS Sui Mobile Wallets Do Not Work With the Service-Worker Portal",id:"ios-sui-mobile-wallets-do-not-work-with-the-service-worker-portal",level:3},{value:"Service worker portals do not support progressive web apps (PWAs)",id:"service-worker-portals-do-not-support-progressive-web-apps-pwas",level:3}];function d(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Term:s}=r;return s||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.p,{children:"Walrus Sites can be used to deploy almost any form of traditional static web2 website build for\nmodern browsers. There are, however, a number of restrictions that a developer should keep in mind\nwhen creating or porting a website to Walrus Sites."}),"\n",(0,i.jsx)(r.h2,{id:"no-secret-values",children:"No secret values"}),"\n",(0,i.jsxs)(r.p,{children:["Walrus Sites are fully publicly accessible, as the metadata is stored on Sui, and the site content\nis stored on Walrus. Therefore, developers ",(0,i.jsx)(r.em,{children:"must not"})," store secret values within the sites."]}),"\n",(0,i.jsx)(r.p,{children:"We emphasize again that any such backend-specific operations (storing secret values, authentication,\netc.) are achievable by leveraging the integration with the Sui blockchain and a Sui-compatible\nwallet."}),"\n",(0,i.jsx)(r.h2,{id:"there-is-a-maximum-redirect-depth",children:"There is a maximum redirect depth"}),"\n",(0,i.jsxs)(r.p,{children:["The number of consecutive redirects a Walrus Site can perform is capped by the\nportal (see ",(0,i.jsx)(r.a,{href:"/docs/walrus-sites/portal",children:"Portal configuration"}),"). This measure ensures that loading a Walrus Site\ndoes not result in an infinite loading loop."]}),"\n",(0,i.jsxs)(r.p,{children:["Different portals can set this limit as they desire. The limit for the portal hosted at\n",(0,i.jsx)(r.a,{href:"https://wal.app",children:"https://wal.app"})," has a maximum redirect depth of 3."]}),"\n",(0,i.jsxs)(r.h2,{id:"there-is-a-special-__wal__-path",children:["There is a special ",(0,i.jsx)(r.code,{children:"__wal__"})," path"]}),"\n",(0,i.jsxs)(r.p,{children:["Anything under the ",(0,i.jsx)(r.code,{children:"/__wal__/*"})," path is reserved by the portal for health checks and other\nportal-specific operations. If you use this path inside your site, the resources served under that\npath will not be loaded correctly."]}),"\n",(0,i.jsx)(r.h2,{id:"service-worker-portal-limitations",children:"Service-worker portal limitations"}),"\n",(0,i.jsx)(r.p,{children:"The following limitations only apply to portals based on service workers."}),"\n",(0,i.jsx)(r.admonition,{type:"tip",children:(0,i.jsx)(r.p,{children:"If you need to support any of the features listed below, you should use a server-side portal."})}),"\n",(0,i.jsx)(r.h3,{id:"service-worker-portals-cant-serve-sites-based-on-service-workers",children:"Service-worker portals, can't serve sites based on service workers"}),"\n",(0,i.jsx)(r.p,{children:"Service-worker portals leverage service workers in the clients' browsers to perform essential\noperations:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"reading the site metadata from Sui;"}),"\n",(0,i.jsx)(r.li,{children:"fetching the page content from Walrus; and"}),"\n",(0,i.jsx)(r.li,{children:"serving the content to the browser."}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:['Therefore, a site accessed by a service-worker portal cannot use service workers itself. i.e.\nyou can\'t "stack" service workers! Installing a service worker from within a Walrus Site will\nresult in a dysfunctional site and a poor experience for the ',(0,i.jsx)(s,{lookup:"User",children:"user"}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"ios-sui-mobile-wallets-do-not-work-with-the-service-worker-portal",children:"iOS Sui Mobile Wallets Do Not Work With the Service-Worker Portal"}),"\n",(0,i.jsx)(r.admonition,{type:"warning",children:(0,i.jsxs)(r.p,{children:["This limitation ",(0,i.jsx)(r.strong,{children:"only applies to portal based on service workers"}),". If you need to access sites\nthat support this feature, you should use a server-side portal."]})}),"\n",(0,i.jsxs)(r.p,{children:["Service workers cannot be loaded inside an in-app browser on iOS, because of a limitation of the\nWebKit engine. As a consequence, Walrus Sites that are accessed through a service worker portal\ncannot be used within Sui-compatible wallet apps on iOS. Therefore, Sui wallets cannot currently\nbe used on a service-worker portal on iOS. Note, however, that ",(0,i.jsx)(r.em,{children:"browsing"})," a Walrus Site is still\npossible on iOS through any browser."]}),"\n",(0,i.jsxs)(r.p,{children:["Given that you decided to use a service-worker portal as your main point of access to your sites,\nto provide a seamless experience for iOS users (and other users on browsers that do not support\nservice workers), it is recommended to redirect to a server-side portal (",(0,i.jsx)(r.a,{href:"https://wal.app",children:"https://wal.app"}),").\nWhenever a ","user"," on an iOS wallet browses a Walrus Site, the redirect will automatically take them\nto the ",(0,i.jsx)(r.code,{children:"<site_name>.wal.app"})," server-side portal. This way, the ","user"," can still use the wallet."]}),"\n",(0,i.jsx)(r.h3,{id:"service-worker-portals-do-not-support-progressive-web-apps-pwas",children:"Service worker portals do not support progressive web apps (PWAs)"}),"\n",(0,i.jsx)(r.admonition,{type:"warning",children:(0,i.jsxs)(r.p,{children:["This limitation ",(0,i.jsx)(r.strong,{children:"only applies to portal based on service workers"}),". If you need to access sites\nthat support this feature, you should use a server-side portal."]})}),"\n",(0,i.jsx)(r.p,{children:"With the current design, service-worker portals cannot be used to access progressive web apps\n(PWAs)."}),"\n",(0,i.jsx)(r.p,{children:"Two characteristics of the service-worker portal prevent support for PWAs:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Since the service worker needs to be registered for the page to work, the PWA's manifest file\ncannot be loaded by the browser directly."}),"\n",(0,i.jsx)(r.li,{children:"There can only be one service worker registered per origin. Therefore, registering a PWA's service\nworker would remove the Walrus Sites service worker, breaking Walrus Sites' functionality."}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Note that the server-side portal does not share these limitations. However, for the moment, we\nsupport both technologies: Walrus Sites must be able to load from both a service-worker portal and a\nserver-side portal, and therefore have to be built with the more restrictive feature set. For more\ndetails, see the ",(0,i.jsx)(r.a,{href:"https://en.wikipedia.org/wiki/Progressive_web_app#Installation_criteria",children:"installation requirements for\nPWAs"}),"."]})]})}function h(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8885:(e,r,s)=>{s.d(r,{R:()=>n,x:()=>a});var t=s(9378);const i={},o=t.createContext(i);function n(e){const r=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),t.createElement(o.Provider,{value:r},e.children)}}}]);