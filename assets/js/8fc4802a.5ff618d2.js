"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[8699],{35:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"usage/client-cli","title":"Using the Walrus Client","description":"Comprehensive guide to using the Walrus CLI for storing, reading, and managing blobs with detailed command examples.","source":"@site/../content/usage/client-cli.mdx","sourceDirName":"usage","slug":"/usage/client-cli","permalink":"/docs/usage/client-cli","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/usage/client-cli.mdx","tags":[],"version":"current","frontMatter":{"title":"Using the Walrus Client","description":"Comprehensive guide to using the Walrus CLI for storing, reading, and managing blobs with detailed command examples.","keywords":["walrus","cli","client","command line","store","read","delete","extend","blob management","quilt","batch storage"]},"sidebar":"docsSidebar","previous":{"title":"Interacting with Walrus","permalink":"/docs/usage/interacting"},"next":{"title":"JSON Mode","permalink":"/docs/usage/json-api"}}');var t=s(2714),o=s(8885);const l={title:"Using the Walrus Client",description:"Comprehensive guide to using the Walrus CLI for storing, reading, and managing blobs with detailed command examples.",keywords:["walrus","cli","client","command line","store","read","delete","extend","blob management","quilt","batch storage"]},a=void 0,r={},d=[{value:"Walrus system information",id:"walrus-system-information",level:2},{value:"Storing blobs",id:"storing-blobs",level:2},{value:"Using a Walrus upload relay",id:"using-a-walrus-upload-relay",level:3},{value:"Querying blob status",id:"querying-blob-status",level:2},{value:"Reading blobs",id:"reading-blobs",level:2},{value:"Consistency checks",id:"consistency-checks",level:3},{value:"Extending the Lifetime of a Blob",id:"extending-the-lifetime-of-a-blob",level:2},{value:"Reclaiming space via deletable blobs",id:"reclaiming-space-via-deletable-blobs",level:2},{value:"Shared blobs",id:"shared-blobs",level:2},{value:"Batch-Storing Blobs with Quilts",id:"batch-store",level:2},{value:"Storing Blobs as a Quilt",id:"storing-blobs-as-a-quilt",level:3},{value:"Using <code>--paths</code>",id:"using---paths",level:4},{value:"Using <code>--blobs</code>",id:"using---blobs",level:4},{value:"Reading Blobs from a Quilt",id:"reading-blobs-from-a-quilt",level:3},{value:"List Patches in a Quilt",id:"list-patches-in-a-quilt",level:3},{value:"Blob Object and Blob ID Utilities",id:"blob-object-and-blob-id-utilities",level:2},{value:"Blob attributes",id:"blob-attributes",level:2},{value:"Changing the Default Configuration",id:"changing-the-default-configuration",level:2},{value:"Logging and Metrics",id:"logging-and-metrics",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Term:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"walrus"})," binary can be used to interact with Walrus as a ",(0,t.jsx)(s,{lookup:"Client",children:"client"}),". See the ",(0,t.jsx)(n.a,{href:"/docs/usage/setup",children:"setup\nchapter"})," for prerequisites, installation, and configuration."]}),"\n",(0,t.jsx)(n.p,{children:"Detailed usage information including a full list of available commands can be viewed with"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus --help\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Each sub-command of ",(0,t.jsx)(n.code,{children:"walrus"})," can also be called with ",(0,t.jsx)(n.code,{children:"--help"})," to print its specific arguments and\ntheir meaning."]}),"\n",(0,t.jsxs)(n.p,{children:["If you have multiple ",(0,t.jsx)(n.em,{children:"contexts"})," in your configuration file (as in the default one included on the\n",(0,t.jsx)(n.a,{href:"/docs/usage/setup#configuration",children:"setup page"}),"), you can specify the context for each command through the\n",(0,t.jsx)(n.code,{children:"--context"})," option."]}),"\n",(0,t.jsxs)(n.p,{children:["You can generate a bash/zsh/fish completion script with ",(0,t.jsx)(n.code,{children:"walrus completion"})," and place it in the appropriate\ndirectory like ",(0,t.jsx)(n.code,{children:"~/.local/share/bash-completion/completions"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"walrus-system-information",children:"Walrus system information"}),"\n",(0,t.jsxs)(n.p,{children:["Information about the Walrus system is available through the ",(0,t.jsx)(n.code,{children:"walrus info"})," command. It provides an\noverview of current system parameters such as the current epoch, the number of ",(0,t.jsx)(s,{lookup:"Storage node",children:"storage nodes"})," and\nshards in the system, the maximum ",(0,t.jsx)(s,{lookup:"Blob",children:"blob"})," size, and the current cost in ",(0,t.jsx)(s,{lookup:"WAL",children:"WAL"})," for storing\n","blobs",":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus info\n"})}),"\n",(0,t.jsx)(n.p,{children:"If successful, the console responds:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"Walrus system information\n\nEpochs and storage duration\nCurrent epoch: 1\nStart time: 2025-03-25 15:00:24.408 UTC\nEnd time: 2025-04-08 15:00:24.408 UTC\nEpoch duration: 14days\nBlobs can be stored for at most 53 epochs in the future.\n\nStorage nodes\nNumber of storage nodes: 103\nNumber of shards: 1000\n\nBlob size\nMaximum blob size: 13.6 GiB (14,599,533,452 B)\nStorage unit: 1.00 MiB\n\nStorage prices per epoch\n(Conversion rate: 1 WAL = 1,000,000,000 FROST)\nPrice per encoded storage unit: 0.0001 WAL\nAdditional price for each write: 20,000 FROST\n\n...\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"Epoch duration",type:"tip",children:(0,t.jsxs)(n.p,{children:["The epoch duration on Mainnet is 2 weeks. See ",(0,t.jsx)(n.a,{href:"/docs/usage/networks#network-parameters",children:"here"})," for other parameters on Mainnet and Testnet."]})}),"\n",(0,t.jsx)(n.admonition,{title:"FROST and WAL",type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(s,{lookup:"FROST",children:"FROST"})," is the smaller unit of ","WAL",", similar to MIST for SUI. The conversion is also the same as for\nSUI: ",(0,t.jsx)(n.code,{children:"1 WAL = 1 000 000 000 FROST"}),"."]})}),"\n",(0,t.jsxs)(n.p,{children:["Additional information such as encoding parameters and sizes, BFT system information, and\ninformation on the ","storage nodes"," in the current and (if already selected) the next committee,\nincluding their node IDs and stake and ",(0,t.jsx)(s,{lookup:"Shard",children:"shard"})," distribution can be viewed with various subcommands,\nsee ",(0,t.jsx)(n.code,{children:"walrus info --help"})," for details. Note that the previous ",(0,t.jsx)(n.code,{children:"--dev"})," option has been replaced by the ",(0,t.jsx)(n.code,{children:"all"})," subcommand."]}),"\n",(0,t.jsxs)(n.p,{children:["The health of ","storage nodes"," can be checked with the ",(0,t.jsx)(n.code,{children:"walrus health"})," command. This command takes\ndifferent options to select the nodes to check (see ",(0,t.jsx)(n.code,{children:"walrus health --help"})," for details). For\nexample, ",(0,t.jsx)(n.code,{children:"walrus health --committee"})," checks the status of all current committee members."]}),"\n",(0,t.jsxs)(n.h2,{id:"storing-blobs",children:["Storing ","blobs"]}),"\n",(0,t.jsx)(n.admonition,{title:"Public access",type:"danger",children:(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["All ","blobs"," stored in Walrus are public and discoverable by all."]})," Therefore you must not use Walrus\nto store anything that contains secrets or private data without additional measures to protect\nconfidentiality."]})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["It must be ensured that only a single process uses the Sui wallet for write actions (storing or\ndeleting). When using multiple instances of the ","client"," simultaneously, each of them must be pointed\nto a different wallet. Note, it is possible to store multiple ","blobs"," with a single ",(0,t.jsx)(n.code,{children:"walrus store"}),"\ncommand."]})}),"\n",(0,t.jsxs)(n.p,{children:["Storing one or multiple ","blobs"," on Walrus can be achieved through the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus store <FILES> --epochs <EPOCHS>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["A mandatory CLI argument must be set to specify the lifetime for the ","blob",". There are currently three\nways for this:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"--epochs <EPOCHS>"})," option indicates the number of epochs the ","blob"," should be stored for.\nThere is an upper limit on the number of epochs a ","blob"," can be stored for, which is 53, corresponding\nto two years. In addition to a positive integer, you can also use ",(0,t.jsx)(n.code,{children:"--epochs max"})," to store the ","blob","\nfor the maximum number of epochs. Note that the end epoch is defined as the current epoch plus the\nspecified number of epochs."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"--earliest-expiry-time <EARLIEST_EXPIRY_TIME>"}),' option takes a date in RFC3339 format\n(e.g., "2024-03-20T15:00:00Z") or a more relaxed format (e.g., "2024-03-20 15:00:00") and ensures\nthe ',"blob"," expires after that date if possible."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"--end-epoch <END_EPOCH>"})," option takes a specific end epoch for the ","blob","."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"End epoch",type:"warning",children:(0,t.jsxs)(n.p,{children:["A ","blob"," expires ",(0,t.jsx)(n.em,{children:"at the beginning of its end epoch"}),". For example, a ","blob"," with end epoch ",(0,t.jsx)(n.code,{children:"314"})," will\nbecome unavailable at the beginning of epoch ",(0,t.jsx)(n.code,{children:"314"}),". One consequence of this is that when storing a\n","blob"," with ",(0,t.jsx)(n.code,{children:"--epochs 1"})," immediately before an epoch change, it will expire and become unavailable\nalmost immediately. Note that ","blobs"," can be ",(0,t.jsx)(n.a,{href:"#extending-the-lifetime-of-a-blob",children:"extended"})," only if\nthey have not expired."]})}),"\n",(0,t.jsxs)(n.p,{children:["You can store a single file or multiple files, separated by spaces. Notably, this is compatible\nwith glob patterns; for example, ",(0,t.jsx)(n.code,{children:"walrus store *.png --epochs <EPOCHS>"})," will store all PNG files\nin the current directory."]}),"\n",(0,t.jsxs)(n.p,{children:["You can specify whether a newly stored ","blob"," is ",(0,t.jsx)(n.em,{children:"deletable"})," or ",(0,t.jsx)(n.em,{children:"permanent"})," through the ",(0,t.jsx)(n.code,{children:"--deletable"}),"\nand ",(0,t.jsx)(n.code,{children:"--permanent"})," option, respectively:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["A ",(0,t.jsx)(s,{lookup:"Permanent blob",children:"permanent blob"})," remains available until its ",(0,t.jsx)(s,{lookup:"Expiry",children:"expiry"})," epoch. Not even the uploader may delete it\nbeforehand."]}),"\n",(0,t.jsxs)(n.li,{children:["In contrast, a ",(0,t.jsx)(s,{lookup:"Deletable blob",children:"deletable blob"})," can be deleted at any point during its lifetime by the owner of the\ncorresponding Sui object. See the ",(0,t.jsx)(n.a,{href:"#reclaiming-space-via-deletable-blobs",children:"section on deletable blobs"}),"\nfor more details."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"Change of default blob persistence",type:"warning",children:(0,t.jsxs)(n.p,{children:["Up to (including) version 1.32, the CLI and ",(0,t.jsx)(n.a,{href:"/docs/usage/web-api",children:"publisher"})," store ","blobs"," as ",(0,t.jsx)(n.em,{children:"permanent"})," by\ndefault, requiring the ",(0,t.jsx)(s,{lookup:"User",children:"user"})," to explicitly specify a ","blob"," to be deletable. Starting with version\n1.33, newly stored ","blobs"," are ",(0,t.jsx)(n.em,{children:"deletable"})," by default. If you care about the ","blob"," persistence, make\nsure to use the appropriate flag."]})}),"\n",(0,t.jsxs)(n.p,{children:["By default an owned ",(0,t.jsx)(n.code,{children:"Blob"})," object is created. It is possible to wrap this into a shared object,\nwhich can be funded and extended by anyone, see the ",(0,t.jsx)(n.a,{href:"#shared-blobs",children:"shared blobs section"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["When storing a ","blob",", the ","client"," performs a number of automatic optimizations, including the\nfollowing:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["If the ","blob"," is already stored as a ",(0,t.jsx)(n.em,{children:"permanent blob"})," on Walrus for a sufficient number of epochs\nthe command does not store it again. This behavior can be overwritten with the ",(0,t.jsx)(n.code,{children:"--force"}),"\nCLI option, which stores the ","blob"," again and creates a fresh ","blob"," object on Sui belonging to the\nwallet address."]}),"\n",(0,t.jsxs)(n.li,{children:["If the ","user","'s wallet has a storage resource of suitable size and duration, it is (re-)used instead\nof buying a new one."]}),"\n",(0,t.jsxs)(n.li,{children:["If the ","blob"," is already certified on Walrus but as a ",(0,t.jsx)(n.em,{children:"deletable"}),"blob"," or not for a sufficient\nnumber of epochs, the command skips sending encoded ","blob"," data to the ","storage nodes"," and just\ncollects the availability certificate."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"Costs",type:"tip",children:(0,t.jsxs)(n.p,{children:["We have a ",(0,t.jsx)(n.a,{href:"/docs/dev-guide/costs",children:"separate page"})," with some considerations regarding cost."]})}),"\n",(0,t.jsx)(n.h3,{id:"using-a-walrus-upload-relay",children:"Using a Walrus upload relay"}),"\n",(0,t.jsx)(n.admonition,{title:"Minimum CLI version",type:"note",children:(0,t.jsxs)(n.p,{children:["The Walrus upload relay functionality is only available in the Walrus CLI version ",(0,t.jsx)(n.em,{children:"v1.29"})," or higher."]})}),"\n",(0,t.jsxs)(n.p,{children:["A Walrus upload relay is a third party service that can help clients with limited bandwidth and\nnetworking capabilities (a browser, for example) in storing ","blobs"," on Walrus."]}),"\n",(0,t.jsxs)(n.p,{children:["The asset management on chain (buying storage, registering and certifying ","blobs",") still happens on\nthe ","client","; the upload relay just takes the unencoded ","blob",", encodes it, and sends the slivers to the\n","storage nodes",", finally returning the certificate. See in-depth details in the ",(0,t.jsx)(n.a,{href:"/docs/operator-guide/upload-relay",children:"Walrus upload relay\nsection"})," of these docs."]}),"\n",(0,t.jsxs)(n.p,{children:["When storing ","blobs"," with the ",(0,t.jsx)(n.code,{children:"walrus store"})," command (and also when ",(0,t.jsx)(n.a,{href:"#storing-blobs-as-a-quilt",children:"storing\nquilts"}),") you can use the ",(0,t.jsx)(n.code,{children:"--upload-relay"})," flag with a URL to specify an\nupload relay server be used by the CLI."]}),"\n",(0,t.jsxs)(n.admonition,{title:"Tipping",type:"tip",children:[(0,t.jsxs)(n.p,{children:['The upload relay is a third party service that may require a fee, or "tip". This tip may be a\nconstant SUI amount per ',"blob"," stored, or dependent on the size of the ","blob"," being stored. The Walrus CLI will show you\nhow much tip the upload relay requires, and will ask for confirmation before continuing."]}),(0,t.jsxs)(n.p,{children:["The technical details on how the tip is computed and paid are\n",(0,t.jsx)(n.a,{href:"/docs/operator-guide/upload-relay",children:"here"}),"."]})]}),"\n",(0,t.jsxs)(n.h2,{id:"querying-blob-status",children:["Querying ","blob"," status"]}),"\n",(0,t.jsxs)(n.p,{children:["The status of a ","blob"," can be queried through one of the following commands:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus blob-status --blob-id <BLOB_ID>\n$ walrus blob-status --file <FILE>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This returns whether the ","blob"," is stored and its ",(0,t.jsx)(s,{lookup:"Availability period",children:"availability period"}),". If you specify a file with the\n",(0,t.jsx)(n.code,{children:"--file"})," option,the CLI re-encodes the content of the file and derives the ",(0,t.jsx)(s,{lookup:"Blob ID",children:"blob ID"})," before checking\nthe status."]}),"\n",(0,t.jsxs)(n.p,{children:["When the ","blob"," is available, the ",(0,t.jsx)(n.code,{children:"blob-status"})," command also returns the ",(0,t.jsx)(n.code,{children:"BlobCertified"})," Sui event ID,\nwhich consists of a transaction ID and a sequence number in the events emitted by the transaction.\nThe existence of this event certifies the availability of the ","blob","."]}),"\n",(0,t.jsxs)(n.h2,{id:"reading-blobs",children:["Reading ","blobs"]}),"\n",(0,t.jsxs)(n.p,{children:["Reading ","blobs"," from Walrus can be achieved through the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus read <some blob ID>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["By default the ","blob"," data is written to the standard output. The ",(0,t.jsx)(n.code,{children:"--out <OUT>"})," CLI option can be used\nto specify an output file name. The ",(0,t.jsx)(n.code,{children:"--rpc-url <URL>"})," may be used to specify a Sui RPC node to use\ninstead of the one set in the wallet configuration or the configuration file."]}),"\n",(0,t.jsx)(n.h3,{id:"consistency-checks",children:"Consistency checks"}),"\n",(0,t.jsxs)(n.p,{children:["Walrus performs integrity and consistency checks to ensure that any data read from Walrus is what\nthe writer intended, and that the writer encoded the ","blob"," correctly, see the ",(0,t.jsx)(n.a,{href:"/docs/design/encoding",children:"section about data\nconsistency"})," for further details. Before\n",(0,t.jsx)(n.code,{children:"v1.37"})," the Walrus CLI and ",(0,t.jsx)(s,{lookup:"Aggregator",children:"aggregator"})," always perform the ",(0,t.jsx)(n.a,{href:"/docs/design/encoding",children:"strict consistency\ncheck"}),". Starting with ",(0,t.jsx)(n.code,{children:"v1.37"}),", the default is a ",(0,t.jsx)(n.a,{href:"/docs/design/encoding",children:"more\nperformant consistency check"}),", which is sufficient for\nthe majority of cases. The strict consistency check can be enabled through the flag\n",(0,t.jsx)(n.code,{children:"--strict-consistency-check"})," (added in ",(0,t.jsx)(n.code,{children:"v1.35"}),")."]}),"\n",(0,t.jsxs)(n.p,{children:["Consistency checks can be disabled completely through the flag ",(0,t.jsx)(n.code,{children:"--skip-consistency-check"})," (added in\n",(0,t.jsx)(n.code,{children:"v1.36"}),"). This should only be used if the writer of the ","blob"," is known and trusted."]}),"\n",(0,t.jsxs)(n.h2,{id:"extending-the-lifetime-of-a-blob",children:["Extending the Lifetime of a ","Blob"]}),"\n",(0,t.jsxs)(n.p,{children:["Recall that when you stored your ","blob",", it was necessary to specify its ",(0,t.jsx)(n.a,{href:"#storing-blobs",children:"end epoch"}),".\nBy specifying the end epoch you ensured that the ","blob"," would be available via ",(0,t.jsx)(n.code,{children:"walrus read"})," (or other\nSDK access to Walrus) until that end epoch is reached."]}),"\n",(0,t.jsxs)(n.p,{children:["Walrus ","blob"," lifetimes can be extended ",(0,t.jsxs)(n.em,{children:["as long as the ","blobs"," are not expired"]})," using the\n",(0,t.jsx)(n.code,{children:"walrus extend --blob-obj-id <blob object id> ..."})," command. Both regular single-address owned ","blobs","\nand ",(0,t.jsx)(n.a,{href:"#shared-blobs",children:"shared blobs"})," may be extended. Shared ","blobs"," may be extended by anyone, but owned\n","blobs"," may only be extended by their owner. When extending a shared ","blob",", you will need to supply the\n",(0,t.jsx)(n.code,{children:"--shared"})," flag to inform the command that the ","blob"," is shared."]}),"\n",(0,t.jsxs)(n.p,{children:["Note that the ","blob","'s ",(0,t.jsx)(n.em,{children:"object ID"})," will be needed in order to extend it, the ","blob ID"," is not needed.\nSee ",(0,t.jsx)(n.code,{children:"walrus extend --help"})," for more information on ","blob"," extension."]}),"\n",(0,t.jsxs)(n.h2,{id:"reclaiming-space-via-deletable-blobs",children:["Reclaiming space via deletable ","blobs"]}),"\n",(0,t.jsxs)(n.p,{children:["A ","blob"," that was created as ",(0,t.jsx)(n.em,{children:"deletable"})," may be deleted before its ","expiry"," by the owner of the Sui ","blob","\nobject representing the ","blob",". Deletable ","blobs"," are indicated as such in the Sui events that certify\nthem, and should not be relied upon for availability by others."]}),"\n",(0,t.jsxs)(n.p,{children:["A ","deletable blob"," may be deleted with the command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus delete --blob-id <BLOB_ID>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Optionally the delete command can be invoked by specifying a ",(0,t.jsx)(n.code,{children:"--file <PATH>"})," option, to derive the\n","blob ID"," from a file, or ",(0,t.jsx)(n.code,{children:"--object-id <SUI_ID>"})," to delete the ","blob"," in the Sui ","blob"," object specified."]}),"\n",(0,t.jsxs)(n.p,{children:["Before deleting a ","blob",", the ",(0,t.jsx)(n.code,{children:"walrus delete"})," command will ask for confirmation unless the ",(0,t.jsx)(n.code,{children:"--yes"}),"\noption is specified."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"delete"})," command reclaims the storage object associated with the deleted ","blob",", which is re-used\nto store new ","blobs",". The delete operation provides flexibility around managing storage costs and\nre-using storage."]}),"\n",(0,t.jsxs)(n.p,{children:["The delete operation has limited utility for privacy: It only deletes slivers from the current epoch\n","storage nodes",", and subsequent epoch ","storage nodes",", if no other ","user"," has uploaded a copy of the same\n","blob",". If another copy of the same ","blob"," exists in Walrus, the delete operation will not make the ","blob","\nunavailable for download, and ",(0,t.jsx)(n.code,{children:"walrus read"})," invocations will download it. After the deletion is\nfinished, the CLI checks the updated status of the ","blob"," to see if it is still accessible in Walrus\n(unless the ",(0,t.jsx)(n.code,{children:"--no-status-check"})," option is specified). However, even if it isn't, copies of the\npublic ","blob"," may be cached or downloaded by users, and these copies are not deleted."]}),"\n",(0,t.jsx)(n.admonition,{title:"Delete reclaims space only",type:"danger",children:(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["All ","blobs"," stored in Walrus are public and discoverable by all."]})," The ",(0,t.jsx)(n.code,{children:"delete"})," command will\nnot delete slivers if other copies of the ","blob"," are stored on Walrus, possibly by other users.\nIt does not delete ","blobs"," from caches, slivers from past ","storage nodes",", or copies\nthat could have been made by users before the ","blob"," was deleted."]})}),"\n",(0,t.jsxs)(n.h2,{id:"shared-blobs",children:["Shared ","blobs"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.em,{children:["Shared ","blobs"]}),' are shared Sui objects wrapping "standard" ',(0,t.jsx)(n.code,{children:"Blob"})," objects that can be funded and\nwhose lifetime can be extended by anyone. See the ",(0,t.jsx)(n.a,{href:"https://github.com/MystenLabs/walrus/tree/main/contracts/walrus/sources/system/shared_blob.move",children:"shared blobs\ncontracts"}),"\nfor further details."]}),"\n",(0,t.jsxs)(n.p,{children:["You can create a shared ","blob"," from an existing ",(0,t.jsx)(n.code,{children:"Blob"})," object you own with the ",(0,t.jsx)(n.code,{children:"walrus share"})," command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus share --blob-obj-id <BLOB_OBJ_ID>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The resulting shared ","blob"," can be directly funded by adding an ",(0,t.jsx)(n.code,{children:"--amount"}),", or you can fund an\nexisting shared ","blob"," with the ",(0,t.jsx)(n.code,{children:"walrus fund-shared-blob"})," command. Additionally, you can immediately\nshare a newly created ","blob"," by adding the ",(0,t.jsx)(n.code,{children:"--share"})," option to the ",(0,t.jsx)(n.code,{children:"walrus store"})," command."]}),"\n",(0,t.jsxs)(n.p,{children:["Shared ","blobs"," can only contain permanent ","blobs"," and as such cannot be deleted before their ","expiry","."]}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"#extending-the-lifetime-of-a-blob",children:"this section"})," for more on ","blob"," extension."]}),"\n",(0,t.jsxs)(n.h2,{id:"batch-store",children:["Batch-Storing ","Blobs"," with Quilts"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," The ",(0,t.jsx)(n.em,{children:"quilt"})," feature is only available in Walrus version ",(0,t.jsx)(n.em,{children:"v1.29"})," or higher."]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Blobs"," within a quilt are retrieved by a ",(0,t.jsx)(n.code,{children:"QuiltPatchId"}),", not their standard ",(0,t.jsx)(n.code,{children:"BlobId"}),". This ID\nis generated based on all ","blobs"," in the quilt, so a ","blob","'s ",(0,t.jsx)(n.code,{children:"QuiltPatchId"})," will change if it's\nmoved to a different quilt."]}),"\n",(0,t.jsxs)(n.li,{children:["Standard ","blob"," operations like ",(0,t.jsx)(n.code,{children:"delete"}),", ",(0,t.jsx)(n.code,{children:"extend"}),", or ",(0,t.jsx)(n.code,{children:"share"})," cannot target individual ","blobs","\ninside a quilt; they must be applied to the entire quilt."]}),"\n"]})}),"\n",(0,t.jsxs)(n.p,{children:["For efficiently storing large numbers of small ","blobs",", Walrus provides the Quilt. It batches\nmultiple ","blobs"," into a single storage unit, significantly reducing overhead and cost. You can find\na more detailed overview of the feature ",(0,t.jsx)(n.a,{href:"/docs/usage/quilt",children:"Quilt"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["You can interact with quilts using a dedicated set of ",(0,t.jsx)(n.code,{children:"walrus"})," subcommands."]}),"\n",(0,t.jsxs)(n.h3,{id:"storing-blobs-as-a-quilt",children:["Storing ","Blobs"," as a Quilt"]}),"\n",(0,t.jsxs)(n.p,{children:["To batch-store multiple files as a single quilt, use the ",(0,t.jsx)(n.code,{children:"store-quilt"})," command. You can specify\nthe files to include in two ways:"]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["You must ensure that all the identifiers are unique within a quilt, the operation will fail otherwise.\nIdentifiers are the unique names used to retrieve individual ","blobs"," from within a quilt."]})}),"\n",(0,t.jsxs)(n.h4,{id:"using---paths",children:["Using ",(0,t.jsx)(n.code,{children:"--paths"})]}),"\n",(0,t.jsxs)(n.p,{children:["To store all files from one or more directories recursively. The filename of each file will be\nused as its unique identifier within the quilt. Regular expressions are supported for uploading from\nmultiple paths, same as the ",(0,t.jsx)(n.code,{children:"walrus store"})," command."]}),"\n",(0,t.jsxs)(n.p,{children:["Like the regular ",(0,t.jsx)(n.code,{children:"store"})," command, you can specify the storage duration using ",(0,t.jsx)(n.code,{children:"--epochs"}),",\n",(0,t.jsx)(n.code,{children:"--earliest-expiry-time"}),", or ",(0,t.jsx)(n.code,{children:"--end-epoch"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus store-quilt --epochs <EPOCHS> --paths <path-to-directory-1> <path-to-directory-2> <path-to-blob>\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"using---blobs",children:["Using ",(0,t.jsx)(n.code,{children:"--blobs"})]}),"\n",(0,t.jsxs)(n.p,{children:["To specify a list of ","blobs"," as JSON objects. This gives you more control, allowing you to set a\ncustom ",(0,t.jsx)(n.code,{children:"identifier"})," and ",(0,t.jsx)(n.code,{children:"tags"})," for each file. If ",(0,t.jsx)(n.code,{children:"identifier"})," is ",(0,t.jsx)(n.code,{children:"null"})," or omitted, the file's\nname is used instead."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ walrus store-quilt \\\n    --blobs \'{"path":"<path-to-blob-1>","identifier":"walrus","tags":{"color":"grey","size":"medium"}}\' \\\n            \'{"path":"<path-to_blob-2>","identifier":"seal","tags":{"color":"grey","size":"small"}}\' \\\n    --epochs <EPOCHS>\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"reading-blobs-from-a-quilt",children:["Reading ","Blobs"," from a Quilt"]}),"\n",(0,t.jsxs)(n.p,{children:["You can retrieve individual ","blobs",' (formally "patches") from a quilt without downloading the\nentire quilt. The ',(0,t.jsx)(n.code,{children:"read-quilt"})," command allows you to query for specific ","blobs"," by their identifier,\ntags, or unique patch ID."]}),"\n",(0,t.jsxs)(n.p,{children:["To read ","blobs"," by their identifiers, use the ",(0,t.jsx)(n.code,{children:"--identifiers"})," flag:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus read-quilt --out <download dir> \\\n    --quilt-id 057MX9PAaUIQLliItM_khR_cp5jPHzJWf-CuJr1z1ik --identifiers walrus.jpg another-walrus.jpg\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Blobs",' within a quilt can be accessed and filtered based on their tags. For instance, if you have a\ncollection of animal images stored in a quilt, each labeled with a species tag such as "species=cat,"\nyou can download ',(0,t.jsx)(n.strong,{children:"all"})," images labeled as cats with the following command:"]}),"\n",(0,t.jsxs)(n.p,{children:["Read all ","blobs",' with tag "size: medium":']}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus read-quilt --out <download dir> \\\n    --quilt-id 057MX9PAaUIQLliItM_khR_cp5jPHzJWf-CuJr1z1ik --tag species cat\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can also read a ","blob"," using its QuiltPatchId, which can be retrieved using\n",(0,t.jsx)(n.a,{href:"#list-patches-in-a-quilt",children:(0,t.jsx)(n.code,{children:"list-patches-in-quilt"})}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus read-quilt --out <download dir> \\\n  --quilt-patch-ids GRSuRSQ_hLYR9nyo7mlBlS7MLQVSSXRrfPVOxF6n6XcBuQG8AQ \\\n  GRSuRSQ_hLYR9nyo7mlBlS7MLQVSSXRrfPVOxF6n6XcBwgHHAQ\n"})}),"\n",(0,t.jsx)(n.h3,{id:"list-patches-in-a-quilt",children:"List Patches in a Quilt"}),"\n",(0,t.jsxs)(n.p,{children:["To see all the patches contained within a quilt, along with their identifiers and QuiltPatchIds, use\nthe ",(0,t.jsx)(n.code,{children:"list-patches-in-quilt"})," command."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ walrus list-patches-in-quilt 057MX9PAaUIQLliItM_khR_cp5jPHzJWf-CuJr1z1ik\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"blob-object-and-blob-id-utilities",children:["Blob"," Object and ","Blob ID"," Utilities"]}),"\n",(0,t.jsxs)(n.p,{children:["The command ",(0,t.jsx)(n.code,{children:"walrus blob-id <FILE>"})," may be used to derive the ","blob ID"," of any file. The ","blob ID"," is a\ncommitment to the file, and any ","blob"," with the same ID will decode to the same content. The ","blob","\nID is a 256 bit number and represented on some Sui explorer as a decimal large number. The\ncommand ",(0,t.jsx)(n.code,{children:"walrus convert-blob-id <BLOB_ID_DECIMAL>"})," may be used to convert it to a base64 URL safe\nencoding used by the command line tools and other APIs."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"walrus list-blobs"})," command lists all the non expired Sui ","blob"," object that the current account\nowns, including their ","blob ID",", object ID, and metadata about ","expiry"," and deletable status.\nThe option ",(0,t.jsx)(n.code,{children:"--include-expired"})," also lists expired ","blob"," objects."]}),"\n",(0,t.jsxs)(n.p,{children:["The Sui storage cost associated with ","blob"," objects may be reclaimed by burning the Sui ","blob"," object.\nThis does not lead to the Walrus ","blob"," being deleted, but means that operations such as extending\nits lifetime, deleting it, or modifying attributes are no more available.\nThe ",(0,t.jsx)(n.code,{children:"walrus burn-blobs --object-ids <BLOB_OBJ_IDS>"})," command may be used to burn a specific list of\n","blobs"," object IDs. The ",(0,t.jsx)(n.code,{children:"--all"})," flag burns all ","blobs"," under the ","user"," account,\nand ",(0,t.jsx)(n.code,{children:"--all-expired"})," burns all expired ","blobs"," under the ","user"," account."]}),"\n",(0,t.jsxs)(n.h2,{id:"blob-attributes",children:["Blob"," attributes"]}),"\n",(0,t.jsxs)(n.p,{children:["Walrus allows a set of key-value attribute pairs to be associated with a ","blob"," object. While the key\nand values may be arbitrary strings to accommodate any needs of dapps, specific keys are converted\nto HTTP headers when serving ","blobs"," through aggregators. Each ","aggregator"," can decide which headers it\nallows through the ",(0,t.jsx)(n.code,{children:"--allowed-headers"})," CLI option; the defaults can be viewed through ",(0,t.jsx)(n.code,{children:"walrus aggregator --help"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"The command"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ walrus set-blob-attribute <BLOB_OBJ_ID> --attr "key1" "value1" --attr "key2" "value2"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["sets attributes ",(0,t.jsx)(n.code,{children:"key1"})," and ",(0,t.jsx)(n.code,{children:"key2"})," to values ",(0,t.jsx)(n.code,{children:"value1"})," and ",(0,t.jsx)(n.code,{children:"value2"}),", respectively. The command\n",(0,t.jsx)(n.code,{children:"walrus get-blob-attribute <BLOB_OBJ_ID>"})," returns all attributes associated with a ","blob ID",". Finally,"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ walrus remove-blob-attribute-fields <BLOB_OBJ_ID> --keys "key1,key2"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["deletes the attributes with\nkeys listed (separated by commas or spaces). All attributes of a ","blob"," object may be deleted by\nthe command ",(0,t.jsx)(n.code,{children:"walrus remove-blob-attribute <BLOB_OBJ_ID>"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Note that attributes are associated with ","blob"," object IDs on Sui, rather than the ","blob"," themselves on\nWalrus. This means that the gas for storage is reclaimed by deleting attributes. And also that the\nsame ","blob"," contents may have different attributes for different ","blob"," objects for the same ","blob ID","."]}),"\n",(0,t.jsx)(n.h2,{id:"changing-the-default-configuration",children:"Changing the Default Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Use the ",(0,t.jsx)(n.code,{children:"--config"})," option to specify a custom path to the\n",(0,t.jsx)(n.a,{href:"/docs/usage/setup#configuration",children:"configuration location"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"--wallet <WALLET>"})," argument may be used to specify a non-standard Sui wallet configuration\nfile. And a ",(0,t.jsx)(n.code,{children:"--gas-budget <GAS_BUDGET>"})," argument may be used to change the maximum amount of Sui (in\nMIST) that the command is allowed to use."]}),"\n",(0,t.jsx)(n.h2,{id:"logging-and-metrics",children:"Logging and Metrics"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"walrus"})," CLI allows for multiple levels of logging, which can be turned on via an env variable:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ RUST_LOG=walrus=trace walrus info\n"})}),"\n",(0,t.jsxs)(n.p,{children:["By default ",(0,t.jsx)(n.code,{children:"info"})," level logs are enabled, but ",(0,t.jsx)(n.code,{children:"debug"})," and ",(0,t.jsx)(n.code,{children:"trace"})," can give a more intimate\nunderstanding of what a command does, or how it fails."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8885:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var i=s(9378);const t={},o=i.createContext(t);function l(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);