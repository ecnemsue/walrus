"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[9394],{8885:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>r});var s=i(9378);const t={},o=s.createContext(t);function d(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(o.Provider,{value:n},e.children)}},9769:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"walrus-sites/commands","title":"Site Builder Commands","description":"Complete reference for Walrus Sites site builder CLI commands including deploy, publish, update, and management operations.","source":"@site/../content/walrus-sites/commands.mdx","sourceDirName":"walrus-sites","slug":"/walrus-sites/commands","permalink":"/docs/walrus-sites/commands","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/walrus-sites/commands.mdx","tags":[],"version":"current","frontMatter":{"title":"Site Builder Commands","description":"Complete reference for Walrus Sites site builder CLI commands including deploy, publish, update, and management operations.","keywords":["walrus sites","site builder","cli commands","deploy","publish","update","commands reference","site management"]},"sidebar":"sitesSidebar","previous":{"title":"Advanced Functionality","permalink":"/docs/walrus-sites/advanced"},"next":{"title":"Configuring the Site Builder","permalink":"/docs/walrus-sites/builder-config"}}');var t=i(2714),o=i(8885);const d={title:"Site Builder Commands",description:"Complete reference for Walrus Sites site builder CLI commands including deploy, publish, update, and management operations.",keywords:["walrus sites","site builder","cli commands","deploy","publish","update","commands reference","site management"]},r=void 0,l={},a=[{value:"<code>deploy</code>",id:"deploy",level:2},{value:"Behavior",id:"behavior",level:3},{value:"Usage",id:"usage",level:3},{value:"Migrating from <code>publish</code>/<code>update</code>",id:"migrating-from-publishupdate",level:3},{value:"<code>publish</code>",id:"publish",level:2},{value:"<code>update</code>",id:"update",level:2},{value:"<code>convert</code>",id:"convert",level:2},{value:"<code>site-map</code>",id:"site-map",level:2},{value:"<code>list-directory</code>",id:"list-directory",level:2},{value:"<code>destroy</code>",id:"destroy",level:2},{value:"<code>update-resource</code>",id:"update-resource",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"We now describe in more detail the commands available through the site builder."}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["In general, the ",(0,t.jsx)(n.code,{children:"--help"})," flag is your friend, you can add it to get further details for the whole\nCLI (",(0,t.jsx)(n.code,{children:"site-builder --help"}),") or individual commands (e.g. ",(0,t.jsx)(n.code,{children:"site-builder update --help"}),")."]})}),"\n",(0,t.jsx)(n.h2,{id:"deploy",children:(0,t.jsx)(n.code,{children:"deploy"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"deploy"})," command is the primary and recommended command for managing your Walrus Site on Sui.\nThe command takes a directory as input and creates a new Walrus Site from the\nresources contained within, and on subsequent calls, it updates the existing site."]}),"\n",(0,t.jsx)(n.h3,{id:"behavior",children:"Behavior"}),"\n",(0,t.jsx)(n.p,{children:"The deploy command determines whether to publish a new site or update an existing one by looking for\na Site Object ID. It finds the ID with the following priority:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["An ID provided directly via the ",(0,t.jsx)(n.code,{children:"--object-id <OBJECT_ID>"})," command-line flag."]}),"\n",(0,t.jsx)(n.li,{children:"An ID found in the object_id field of the ws-resources.json file."}),"\n",(0,t.jsx)(n.li,{children:"If no ID is found by either method, deploy will publish a new site."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["When a new site is published, its object_id is automatically saved back to ",(0,t.jsx)(n.code,{children:"ws-resources.json"}),",\nstreamlining future updates."]}),"\n",(0,t.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.p,{children:"As shown by the command's help information, the typical usage is:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ site-builder deploy [OPTIONS] --epochs <EPOCHS> <DIRECTORY>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"deploy"})," command determines whether to publish or update based on the presence of an ",(0,t.jsx)(n.code,{children:"object_id"}),"\nfield in the ",(0,t.jsx)(n.code,{children:"ws-resources.json"})," file. ",(0,t.jsx)(n.a,{href:"/docs/walrus-sites/routing",children:"specifying headers and routing"}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"object_id"})," field is automatically set by the ",(0,t.jsx)(n.code,{children:"deploy"}),"\ncommand, when deploying a new site, so there is no need for manually tracking the Site's Object ID."]})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The wallet you are using to update an existing Site must be the ",(0,t.jsx)(n.em,{children:"owner"})," of the Walrus Site object to be able\nto update it."]})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"--epochs"})," flag specifies the number of epochs for which the site's resources will be stored\non Walrus (e.g., 10). You can also use max to store for the maximum allowed duration."]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"--epochs"})," flag is required & it's value must be greater than 0."]})}),"\n",(0,t.jsx)(n.admonition,{title:"Epoch duration on Walrus",type:"danger",children:(0,t.jsxs)(n.p,{children:["On Walrus Testnet, the epoch duration is ",(0,t.jsx)(n.strong,{children:"one day"}),".\nOn Walrus Mainnet, the epoch duration is ",(0,t.jsx)(n.strong,{children:"fourteen days"}),".\nTherefore, consider storing your site for a large number of epochs\nif you want to make it available for the following months!\nThe maximum duration is set to 53 epochs."]})}),"\n",(0,t.jsxs)(n.p,{children:["If you are just uploading raw files without an ",(0,t.jsx)(n.code,{children:"index.html"}),", you may want to use the\n",(0,t.jsx)(n.code,{children:"--list-directory"})," flag, which will automatically create an index page to browse the files. See for\nexample ",(0,t.jsx)(n.a,{href:"https://bin.wal.app",children:"https://bin.wal.app"}),"."]}),"\n",(0,t.jsxs)(n.h3,{id:"migrating-from-publishupdate",children:["Migrating from ",(0,t.jsx)(n.code,{children:"publish"}),"/",(0,t.jsx)(n.code,{children:"update"})]}),"\n",(0,t.jsxs)(n.p,{children:["If you have a site that was previously managed with the ",(0,t.jsx)(n.code,{children:"publish"})," and ",(0,t.jsx)(n.code,{children:"update"})," commands, you can\neasily switch to the ",(0,t.jsx)(n.code,{children:"deploy"})," command using one of the following methods:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Recommended"}),": Use the ",(0,t.jsx)(n.code,{children:"--object-id"})," cli flag\nSimply run the ",(0,t.jsx)(n.code,{children:"deploy"})," command and provide your existing Site's Object ID via the ",(0,t.jsx)(n.code,{children:"--object-id"})," flag:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ site-builder deploy --object-id <YOUR_EXISTING_SITE_ID> --epochs <NUMBER> ./path/to/your/site\n"})}),"\n",(0,t.jsxs)(n.p,{children:["On success, this will update your site and automatically create (or update if already existing) a\n",(0,t.jsx)(n.code,{children:"ws-resources.json"})," file with the Site's Object ID saved in the ",(0,t.jsx)(n.code,{children:"object_id"})," field.\nFuture deployments will then be as simple as:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ site-builder deploy --epochs <NUMBER> ./path/to/your/site\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Manual ",(0,t.jsx)(n.code,{children:"ws-resources.json"})," setup.\nYou can manually create or update a ",(0,t.jsx)(n.code,{children:"ws-resources.json"})," file in your site's root directory and add\nthe ",(0,t.jsx)(n.code,{children:"object_id"})," field with your existing site's Object ID."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "object_id": "0x123...abc"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Then, you can simply run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ site-builder deploy --epochs <NUMBER> ./path/to/your/site\n"})}),"\n",(0,t.jsx)(n.h2,{id:"publish",children:(0,t.jsx)(n.code,{children:"publish"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"deploy"})," command is the new standard for publishing and updating your Walrus Sites.\nUsers are encouraged to migrate to the ",(0,t.jsx)(n.code,{children:"deploy"})," command for a simpler and more robust experience."]})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"publish"})," command, as described in the ",(0,t.jsx)(n.a,{href:"/docs/walrus-sites/tutorial-publish",children:"previous section"}),", publishes a\nnew site on Sui. The command takes a directory as input and creates a new Walrus Site from the\nresources contained within."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"--epochs"})," flag allows you to specify for how long the site data will be stored on Walrus."]}),"\n",(0,t.jsx)(n.admonition,{title:"Epoch duration on Walrus",type:"danger",children:(0,t.jsxs)(n.p,{children:["On Walrus Testnet, the epoch duration is ",(0,t.jsx)(n.strong,{children:"one day"}),".\nOn Walrus Mainnet, the epoch duration is ",(0,t.jsx)(n.strong,{children:"fourteen days"}),".\nTherefore, consider storing your site for a large number of epochs\nif you want to make it available for the following months!\nThe maximum duration is set to 53 epochs."]})}),"\n",(0,t.jsxs)(n.p,{children:["If you are just uploading raw files without an ",(0,t.jsx)(n.code,{children:"index.html"}),", you may want to use the\n",(0,t.jsx)(n.code,{children:"--list-directory"})," flag, which will automatically create an index page to browse the files. See for\nexample ",(0,t.jsx)(n.a,{href:"https://bin.wal.app",children:"https://bin.wal.app"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"publish"})," command will also respect the instructions in the ",(0,t.jsx)(n.code,{children:"ws-resources.json"})," configuration\nfile. To know more, see the section on ",(0,t.jsx)(n.a,{href:"/docs/walrus-sites/routing",children:"specifying headers and routing"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"update",children:(0,t.jsx)(n.code,{children:"update"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"deploy"})," command is the new standard for publishing and updating your Walrus Sites.\nUsers are encouraged to migrate to the ",(0,t.jsx)(n.code,{children:"deploy"})," command for a simpler and more robust experience."]})}),"\n",(0,t.jsxs)(n.p,{children:["This command is the equivalent of ",(0,t.jsx)(n.code,{children:"publish"}),", but for updating an existing site. It takes the same\narguments, with the addition of the Sui object ID of the site to update."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The wallet you are using to call ",(0,t.jsx)(n.code,{children:"update"})," must be the ",(0,t.jsx)(n.em,{children:"owner"})," of the Walrus Site object to be able\nto update it."]})}),"\n",(0,t.jsx)(n.h2,{id:"convert",children:(0,t.jsx)(n.code,{children:"convert"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"convert"})," command converts an object ID in hex format to the equivalent Base36 format. This\ncommand is useful if you have the Sui object ID of a Walrus Site, and want to know the subdomain\nwhere you can browse it."]}),"\n",(0,t.jsx)(n.h2,{id:"site-map",children:(0,t.jsx)(n.code,{children:"site-map"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"sitemap"})," command shows the resources that compose the Walrus Site at the given object ID."]}),"\n",(0,t.jsx)(n.h2,{id:"list-directory",children:(0,t.jsx)(n.code,{children:"list-directory"})}),"\n",(0,t.jsxs)(n.p,{children:["With ",(0,t.jsx)(n.code,{children:"list-directory"}),", you can obtain the ",(0,t.jsx)(n.code,{children:"index.html"})," file that would be generated by running\n",(0,t.jsx)(n.code,{children:"publish"})," or ",(0,t.jsx)(n.code,{children:"update"})," with the ",(0,t.jsx)(n.code,{children:"--list-directory"})," flag. This is useful to see how the index page\nwould look like before publishing it\u2014and possibly editing to make it look nicer!"]}),"\n",(0,t.jsx)(n.h2,{id:"destroy",children:(0,t.jsx)(n.code,{children:"destroy"})}),"\n",(0,t.jsx)(n.p,{children:"Destroys both blockchain objects and Walrus assets of a site with the given object id."}),"\n",(0,t.jsx)(n.h2,{id:"update-resource",children:(0,t.jsx)(n.code,{children:"update-resource"})}),"\n",(0,t.jsx)(n.p,{children:"Adds or updates a single resource in a site, eventually replacing any pre-existing ones."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);